import{j as e,m as f,A as F}from"./ui-D_LkVF2r.js";import{r as v,d as U,u as X}from"./vendor-Vqvh67Lm.js";import{D as J}from"./Dropdown-DWn6fHsO.js";import{S as Y}from"./Slider-B58Hgk20.js";import{I as A,T as P,L as T,u as _,b as Z}from"./index-BPFpS68l.js";import{B as C}from"./Button-C3O7gUUW.js";import{g as L,C as E}from"./GeminiService-BJzV3ZcK.js";import{B as W,P as D}from"./Badge-BSkIqIZk.js";import"./storage-BBQgdv-R.js";import"./ai-BpRkNtKl.js";const ee=[{value:"all",label:"ì „ì²´ ì´ìš©ê°€"},{value:"teens",label:"10ëŒ€"},{value:"20s",label:"20ëŒ€"},{value:"30plus",label:"30ëŒ€ ì´ìƒ"}],se=({data:s,updateData:n})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"ìž‘í’ˆì˜ ê¸°ë³¸ ì •ë³´ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”"}),e.jsx("p",{className:"text-gray-400",children:"AIê°€ ì´ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê¸°íšì˜ë„ì„œë¥¼ ìž‘ì„±í•©ë‹ˆë‹¤"})]}),e.jsx(A,{label:"ìž‘í’ˆ ì œëª©",placeholder:"ì˜ˆ: ì–´ëŠ ë‚  ê³µì£¼ê°€ ë˜ì–´ë²„ë ¸ë‹¤",value:s.title,onChange:a=>n({title:a.target.value})}),e.jsx(P,{label:"ìž‘í’ˆ ì»¨ì…‰ (ê°„ë‹¨í•œ ì„¤ëª…)",placeholder:"ì˜ˆ: í˜„ëŒ€ ì§ìž¥ì¸ì´ ì´ì„¸ê³„ì˜ ì•…ì—­ ê³µì£¼ë¡œ ë¹™ì˜í•˜ì—¬ ì£½ìŒì„ í”¼í•˜ê¸° ìœ„í•´ ê³ êµ°ë¶„íˆ¬í•˜ëŠ” ë¡œë§¨ìŠ¤ íŒíƒ€ì§€",value:s.briefConcept,onChange:a=>n({briefConcept:a.target.value}),rows:4,showCount:!0,maxLength:500}),e.jsx(J,{label:"íƒ€ê²Ÿ ë…ìžì¸µ",options:ee,value:s.targetAudience,onChange:a=>n({targetAudience:a})}),e.jsx(Y,{label:"ì˜ˆìƒ íšŒì°¨ ìˆ˜",value:s.episodeCount,onChange:a=>n({episodeCount:a}),min:5,max:100,step:5,formatValue:a=>`${a}í™”`}),e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 border border-gray-600",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"ìž…ë ¥ íŒ"}),e.jsxs("ul",{className:"text-sm text-gray-500 space-y-1",children:[e.jsx("li",{children:"â€¢ ì œëª©ì€ ìž‘í’ˆì˜ ë¶„ìœ„ê¸°ë¥¼ ìž˜ ë‚˜íƒ€ë‚´ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤"}),e.jsx("li",{children:"â€¢ ì»¨ì…‰ì—ëŠ” ì£¼ì¸ê³µ, ë°°ê²½, í•µì‹¬ ê°ˆë“±ì„ í¬í•¨í•´ì£¼ì„¸ìš”"}),e.jsx("li",{children:"â€¢ íšŒì°¨ ìˆ˜ëŠ” ë‚˜ì¤‘ì— ë³€ê²½í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤"})]})]})]}),q=[{id:"romance",label:"ë¡œë§¨ìŠ¤",icon:"ðŸ’•",color:"pink"},{id:"action",label:"ì•¡ì…˜",icon:"âš”ï¸",color:"red"},{id:"fantasy",label:"íŒíƒ€ì§€",icon:"ðŸ§™",color:"purple"},{id:"slice-of-life",label:"ì¼ìƒ",icon:"â˜•",color:"green"},{id:"thriller",label:"ìŠ¤ë¦´ëŸ¬",icon:"ðŸ”ª",color:"gray"},{id:"comedy",label:"ì½”ë¯¸ë””",icon:"ðŸ˜‚",color:"yellow"},{id:"sci-fi",label:"SF",icon:"ðŸš€",color:"blue"},{id:"drama",label:"ë“œë¼ë§ˆ",icon:"ðŸŽ­",color:"orange"},{id:"horror",label:"í˜¸ëŸ¬",icon:"ðŸ‘»",color:"slate"},{id:"mystery",label:"ë¯¸ìŠ¤í„°ë¦¬",icon:"ðŸ”",color:"indigo"}],te=[{id:"korean-webtoon",label:"í•œêµ­ ì›¹íˆ°",description:"ê¹”ë”í•œ ì„ í™”ì™€ ë°ì€ ìƒ‰ê°",preview:"ðŸ‡°ðŸ‡·"},{id:"japanese-manga",label:"ì¼ë³¸ ë§Œí™”",description:"ìŠ¤í¬ë¦°í†¤ê³¼ ì—­ë™ì  êµ¬ë„",preview:"ðŸ‡¯ðŸ‡µ"},{id:"american-comic",label:"ë¯¸êµ­ ì½”ë¯¹ìŠ¤",description:"êµµì€ ì„ ê³¼ ê°•ë ¬í•œ ì±„ìƒ‰",preview:"ðŸ‡ºðŸ‡¸"},{id:"pastel-soft",label:"íŒŒìŠ¤í…” í†¤",description:"ë¶€ë“œëŸ½ê³  ë”°ëœ»í•œ ë¶„ìœ„ê¸°",preview:"ðŸŽ¨"},{id:"watercolor",label:"ìˆ˜ì±„í™”",description:"ì€ì€í•˜ê³  ê°ì„±ì ì¸ ìŠ¤íƒ€ì¼",preview:"ðŸ’§"},{id:"noir-contrast",label:"ëŠì™€ë¥´",description:"ê°•í•œ ëª…ì•” ëŒ€ë¹„",preview:"ðŸŒ‘"},{id:"chibi-cute",label:"ì¹˜ë¹„/ê·€ì—¬ì›€",description:"í° ëˆˆê³¼ ë‹¨ìˆœí™”ëœ ì²´í˜•",preview:"ðŸ¥°"},{id:"realistic",label:"ì‚¬ì‹¤ì ",description:"ì„¸ë°€í•œ ë¬˜ì‚¬ì™€ ë””í…Œì¼",preview:"ðŸ“·"}],re=["ë°ì€","ì–´ë‘ìš´","ë”°ëœ»í•œ","ì°¨ê°€ìš´","ê¸´ìž¥ê°","íŽ¸ì•ˆí•œ","ì‹ ë¹„ë¡œìš´","ìœ ì¾Œí•œ","ê°ì„±ì ","ì—­ë™ì ","ëª½í™˜ì ","ìž”ìž”í•œ"],le=({data:s,updateData:n})=>{const a=r=>{s.genre===r?n({genre:""}):n({genre:r})},d=r=>{const i=s.subGenres.includes(r)?s.subGenres.filter(m=>m!==r):[...s.subGenres,r].slice(0,3);n({subGenres:i})},x=r=>{const i=s.mood.includes(r)?s.mood.filter(m=>m!==r):[...s.mood,r].slice(0,4);n({mood:i})};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"ìž¥ë¥´ì™€ ìŠ¤íƒ€ì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”"}),e.jsx("p",{className:"text-gray-400",children:"AIê°€ ì„ íƒí•œ ìŠ¤íƒ€ì¼ì— ë§žì¶° ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"ë©”ì¸ ìž¥ë¥´ (1ê°œ ì„ íƒ)"}),e.jsx("div",{className:"grid grid-cols-5 gap-3",children:q.map(r=>e.jsxs(f.button,{onClick:()=>a(r.id),whileHover:{scale:1.05},whileTap:{scale:.95},className:`
                p-4 rounded-xl border-2 transition-all duration-200
                flex flex-col items-center justify-center gap-2
                ${s.genre===r.id?"border-purple-500 bg-purple-500/20":"border-gray-700 bg-gray-800/50 hover:border-gray-600"}
              `,children:[e.jsx("span",{className:"text-2xl",children:r.icon}),e.jsx("span",{className:"text-sm font-medium text-white",children:r.label})]},r.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"ì„œë¸Œ ìž¥ë¥´ (ìµœëŒ€ 3ê°œ)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:q.filter(r=>r.id!==s.genre).map(r=>e.jsxs(f.button,{onClick:()=>d(r.id),whileHover:{scale:1.05},whileTap:{scale:.95},className:`
                  px-4 py-2 rounded-full text-sm font-medium
                  transition-all duration-200
                  ${s.subGenres.includes(r.id)?"bg-purple-500/30 text-purple-300 border border-purple-500":"bg-gray-700 text-gray-400 border border-gray-600 hover:border-gray-500"}
                `,children:[r.icon," ",r.label]},r.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"ì•„íŠ¸ ìŠ¤íƒ€ì¼"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:te.map(r=>e.jsxs(f.button,{onClick:()=>n({artStyle:r.id}),whileHover:{scale:1.02},whileTap:{scale:.98},className:`
                p-4 rounded-xl border-2 transition-all duration-200 text-left
                ${s.artStyle===r.id?"border-purple-500 bg-purple-500/20":"border-gray-700 bg-gray-800/50 hover:border-gray-600"}
              `,children:[e.jsx("span",{className:"text-3xl mb-2 block",children:r.preview}),e.jsx("span",{className:"text-sm font-medium text-white block",children:r.label}),e.jsx("span",{className:"text-xs text-gray-400",children:r.description})]},r.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"ë¶„ìœ„ê¸° (ìµœëŒ€ 4ê°œ)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:re.map(r=>e.jsx(f.button,{onClick:()=>x(r),whileHover:{scale:1.05},whileTap:{scale:.95},className:`
                px-4 py-2 rounded-full text-sm font-medium
                transition-all duration-200
                ${s.mood.includes(r)?"bg-pink-500/30 text-pink-300 border border-pink-500":"bg-gray-700 text-gray-400 border border-gray-600 hover:border-gray-500"}
              `,children:r},r))})]})]})};function O(s){let n=s.trim();n.startsWith("```json")?n=n.slice(7):n.startsWith("```")&&(n=n.slice(3)),n.endsWith("```")&&(n=n.slice(0,-3)),n=n.trim();try{return JSON.parse(n)}catch{return console.warn("JSON parsing failed, attempting recovery..."),ne(n)}}function ne(s){let n=s;const a=n.lastIndexOf('"'),d=n.lastIndexOf(":");if(a>d){const l=n.substring(0,a),p=l.lastIndexOf('"');if(l.lastIndexOf(":")>p){const t=l.lastIndexOf(","),g=l.lastIndexOf("{"),y=l.lastIndexOf("["),b=Math.max(t,g,y);b>0&&(n=n.substring(0,b+1))}}let x=0,r=0,i=!1,m=!1;for(const l of n){if(m){m=!1;continue}if(l==="\\"){m=!0;continue}if(l==='"'){i=!i;continue}i||(l==="{"&&x++,l==="}"&&x--,l==="["&&r++,l==="]"&&r--)}for(n=n.replace(/,\s*$/,"");r>0;)n+="]",r--;for(;x>0;)n+="}",x--;try{return JSON.parse(n)}catch{const p=n.match(/^(\{[\s\S]*"(?:characters|episodes|acts)":\s*\[[\s\S]*\})\s*,?\s*(?:\{[^}]*)?$/);if(p)try{let c=p[1];return c.endsWith("]")||(c+="]"),c.endsWith("}")||(c+="}"),JSON.parse(c)}catch{}throw new Error("JSON íŒŒì‹± ì‹¤íŒ¨: AI ì‘ë‹µì´ ë¶ˆì™„ì „í•©ë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}}const ie=({data:s,updateData:n,isGenerating:a,setIsGenerating:d})=>{const[x,r]=v.useState(null),i=async()=>{if(!s.title||!s.briefConcept||!s.genre){r("ê¸°ë³¸ ì •ë³´ì™€ ìž¥ë¥´ë¥¼ ë¨¼ì € ìž…ë ¥í•´ì£¼ì„¸ìš”.");return}d(!0),r(null);try{const l=`
        ì›¹íˆ° ê¸°íšì˜ë„ì„œë¥¼ ìž‘ì„±í•´ì£¼ì„¸ìš”.

        ìž‘í’ˆ ì •ë³´:
        - ì œëª©: ${s.title}
        - ìž¥ë¥´: ${s.genre} ${s.subGenres.length>0?`(ì„œë¸Œ: ${s.subGenres.join(", ")})`:""}
        - ì»¨ì…‰: ${s.briefConcept}
        - íƒ€ê²Ÿ: ${s.targetAudience}
        - ë¶„ìœ„ê¸°: ${s.mood.join(", ")}
        - ì˜ˆìƒ íšŒì°¨: ${s.episodeCount}í™”

        ë‹¤ìŒ í•­ëª©ì„ ìž‘ì„±í•´ì£¼ì„¸ìš”. JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”:
        {
          "synopsis": "3-5ë¬¸ìž¥ì˜ ì‹œë†‰ì‹œìŠ¤",
          "coreMessage": "ì´ ìž‘í’ˆì´ ì „ë‹¬í•˜ê³ ìž í•˜ëŠ” í•µì‹¬ ë©”ì‹œì§€",
          "targetAnalysis": "íƒ€ê²Ÿ ë…ìžì¸µ ë¶„ì„ ë° ê·¸ë“¤ì´ ì´ ìž‘í’ˆì— ëŒë¦´ ì´ìœ ",
          "uniquePoints": ["ì°¨ë³„í™” í¬ì¸íŠ¸ 1", "ì°¨ë³„í™” í¬ì¸íŠ¸ 2", "ì°¨ë³„í™” í¬ì¸íŠ¸ 3"],
          "expectedDirection": "ì˜ˆìƒ ì „ê°œ ë°©í–¥ ë° ê²°ë§ ížŒíŠ¸"
        }
      `,p=await L.generateText(l,{temperature:.7,maxTokens:8192}),c=O(p);n({planning:c})}catch(l){console.error("Planning generation failed:",l),r("ê¸°íšì„œ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}finally{d(!1)}},m=(l,p)=>{s.planning&&n({planning:{...s.planning,[l]:p}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"AI ê¸°íšì˜ë„ì„œ"}),e.jsx("p",{className:"text-gray-400",children:"AIê°€ ìž…ë ¥í•œ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê¸°íšì˜ë„ì„œë¥¼ ìž‘ì„±í•©ë‹ˆë‹¤"})]}),s.planning?e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-medium text-purple-400 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center",children:"ðŸ“–"}),"ì‹œë†‰ì‹œìŠ¤"]}),e.jsx(P,{value:s.planning.synopsis,onChange:l=>m("synopsis",l.target.value),rows:4,className:"bg-gray-700/50"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-medium text-pink-400 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-pink-500/20 flex items-center justify-center",children:"ðŸ’¡"}),"í•µì‹¬ ë©”ì‹œì§€"]}),e.jsx(P,{value:s.planning.coreMessage,onChange:l=>m("coreMessage",l.target.value),rows:2,className:"bg-gray-700/50"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-medium text-blue-400 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:"ðŸŽ¯"}),"íƒ€ê²Ÿ ë¶„ì„"]}),e.jsx(P,{value:s.planning.targetAnalysis,onChange:l=>m("targetAnalysis",l.target.value),rows:3,className:"bg-gray-700/50"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-medium text-green-400 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center",children:"âœ¨"}),"ì°¨ë³„í™” í¬ì¸íŠ¸"]}),e.jsx("ul",{className:"space-y-2",children:s.planning.uniquePoints.map((l,p)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-green-400 font-medium",children:[p+1,"."]}),e.jsx("input",{type:"text",value:l,onChange:c=>{const t=[...s.planning.uniquePoints];t[p]=c.target.value,m("uniquePoints",t)},className:"flex-1 bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white"})]},p))})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-medium text-orange-400 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center",children:"ðŸš€"}),"ì˜ˆìƒ ì „ê°œ ë°©í–¥"]}),e.jsx(P,{value:s.planning.expectedDirection,onChange:l=>m("expectedDirection",l.target.value),rows:3,className:"bg-gray-700/50"})]}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(C,{variant:"ghost",onClick:i,disabled:a,loading:a,children:"ë‹¤ì‹œ ìƒì„±í•˜ê¸°"})})]}):e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:a?e.jsxs("div",{className:"text-center",children:[e.jsx(T,{size:"lg",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"AIê°€ ê¸°íšì„œë¥¼ ìž‘ì„±í•˜ê³  ìžˆìŠµë‹ˆë‹¤..."}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"ì•½ 10-20ì´ˆ ì†Œìš”ë©ë‹ˆë‹¤"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-purple-500/20 flex items-center justify-center mb-6",children:e.jsx("svg",{className:"w-12 h-12 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"ê¸°íšì˜ë„ì„œ ìƒì„± ì¤€ë¹„ ì™„ë£Œ"}),e.jsx("p",{className:"text-gray-400 text-center mb-6 max-w-md",children:"ì•„ëž˜ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ AIê°€ ìž…ë ¥í•˜ì‹  ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê¸°íšì˜ë„ì„œë¥¼ ìžë™ìœ¼ë¡œ ìž‘ì„±í•©ë‹ˆë‹¤."}),e.jsx(C,{onClick:i,variant:"primary",size:"lg",children:"ê¸°íšì„œ ìƒì„±í•˜ê¸°"}),x&&e.jsx("p",{className:"text-red-400 mt-4",children:x})]})})]})},ae=({data:s,updateData:n,isGenerating:a,setIsGenerating:d})=>{const[x,r]=v.useState(null),i=async()=>{if(!s.planning){r("ë¨¼ì € ê¸°íšì˜ë„ì„œë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.");return}d(!0),r(null);try{const l=`
        ì›¹íˆ° ì„¸ê³„ê´€ ì„¤ì •ì„ ìž‘ì„±í•´ì£¼ì„¸ìš”.

        ìž‘í’ˆ ì •ë³´:
        - ì œëª©: ${s.title}
        - ìž¥ë¥´: ${s.genre}
        - ì‹œë†‰ì‹œìŠ¤: ${s.planning.synopsis}

        ë‹¤ìŒ í•­ëª©ì„ ìž‘ì„±í•´ì£¼ì„¸ìš”. JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”:
        {
          "era": "ì‹œëŒ€ì  ë°°ê²½ (ì˜ˆ: í˜„ëŒ€, ì¤‘ì„¸ íŒíƒ€ì§€, ê·¼ë¯¸ëž˜ ë“±)",
          "setting": "ì£¼ìš” ë¬´ëŒ€ ì„¤ëª… (2-3ë¬¸ìž¥)",
          "mainLocations": [
            {
              "id": "loc1",
              "name": "ìž¥ì†Œ ì´ë¦„",
              "description": "ìž¥ì†Œ ì„¤ëª…",
              "significance": "ìŠ¤í† ë¦¬ì—ì„œì˜ ì¤‘ìš”ì„±",
              "variations": []
            }
          ],
          "specialRules": ["ì„¸ê³„ê´€ íŠ¹ìˆ˜ ê·œì¹™ 1", "ê·œì¹™ 2"],
          "socialStructure": "ì‚¬íšŒ êµ¬ì¡° ì„¤ëª… (ì„ íƒ)",
          "technology": "ê¸°ìˆ  ìˆ˜ì¤€ ì„¤ëª… (ì„ íƒ)"
        }

        mainLocationsëŠ” 3-5ê°œ ì •ë„ ìƒì„±í•´ì£¼ì„¸ìš”.
      `,p=await L.generateText(l,{temperature:.7}),c=O(p);n({worldBuilding:c})}catch(l){console.error("World building generation failed:",l),r("ì„¸ê³„ê´€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}finally{d(!1)}},m=(l,p)=>{s.worldBuilding&&n({worldBuilding:{...s.worldBuilding,[l]:p}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"ì„¸ê³„ê´€ ì„¤ì •"}),e.jsx("p",{className:"text-gray-400",children:"ìž‘í’ˆì˜ ë°°ê²½ì´ ë˜ëŠ” ì„¸ê³„ê´€ì„ êµ¬ì¶•í•©ë‹ˆë‹¤"})]}),s.worldBuilding?e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-sm font-medium text-cyan-400 mb-2",children:"ì‹œëŒ€ì  ë°°ê²½"}),e.jsx(A,{value:s.worldBuilding.era,onChange:l=>m("era",l.target.value),className:"bg-gray-700/50"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-sm font-medium text-cyan-400 mb-2",children:"ê¸°ìˆ  ìˆ˜ì¤€"}),e.jsx(A,{value:s.worldBuilding.technology||"",onChange:l=>m("technology",l.target.value),className:"bg-gray-700/50"})]})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"ì£¼ìš” ë¬´ëŒ€ ì„¤ëª…"}),e.jsx(P,{value:s.worldBuilding.setting,onChange:l=>m("setting",l.target.value),rows:3,className:"bg-gray-700/50"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"ì£¼ìš” ìž¥ì†Œ"}),e.jsx("div",{className:"space-y-4",children:s.worldBuilding.mainLocations.map((l,p)=>e.jsx("div",{className:"bg-gray-700/50 rounded-lg p-4 border border-gray-600",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-xl flex-shrink-0",children:"ðŸ“"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(A,{value:l.name,onChange:c=>{const t=[...s.worldBuilding.mainLocations];t[p]={...l,name:c.target.value},m("mainLocations",t)},className:"bg-gray-800/50 font-medium",placeholder:"ìž¥ì†Œ ì´ë¦„"}),e.jsx(P,{value:l.description,onChange:c=>{const t=[...s.worldBuilding.mainLocations];t[p]={...l,description:c.target.value},m("mainLocations",t)},rows:2,className:"bg-gray-800/50 text-sm",placeholder:"ìž¥ì†Œ ì„¤ëª…"}),e.jsx(A,{value:l.significance,onChange:c=>{const t=[...s.worldBuilding.mainLocations];t[p]={...l,significance:c.target.value},m("mainLocations",t)},className:"bg-gray-800/50 text-sm text-gray-400",placeholder:"ìŠ¤í† ë¦¬ì—ì„œì˜ ì¤‘ìš”ì„±"})]})]})},l.id||p))})]}),s.worldBuilding.specialRules&&s.worldBuilding.specialRules.length>0&&e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"ì„¸ê³„ê´€ íŠ¹ìˆ˜ ê·œì¹™"}),e.jsx("ul",{className:"space-y-2",children:s.worldBuilding.specialRules.map((l,p)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-400",children:"âš¡"}),e.jsx("input",{type:"text",value:l,onChange:c=>{const t=[...s.worldBuilding.specialRules||[]];t[p]=c.target.value,m("specialRules",t)},className:"flex-1 bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white"})]},p))})]}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(C,{variant:"ghost",onClick:i,disabled:a,loading:a,children:"ë‹¤ì‹œ ìƒì„±í•˜ê¸°"})})]}):e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:a?e.jsxs("div",{className:"text-center",children:[e.jsx(T,{size:"lg",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"AIê°€ ì„¸ê³„ê´€ì„ êµ¬ì¶•í•˜ê³  ìžˆìŠµë‹ˆë‹¤..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-cyan-500/20 flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-5xl",children:"ðŸŒ"})}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"ì„¸ê³„ê´€ ì„¤ì • ìƒì„±"}),e.jsx("p",{className:"text-gray-400 text-center mb-6 max-w-md",children:"ê¸°íšì˜ë„ì„œë¥¼ ë°”íƒ•ìœ¼ë¡œ ìž‘í’ˆì˜ ì„¸ê³„ê´€ì„ ìžë™ìœ¼ë¡œ êµ¬ì¶•í•©ë‹ˆë‹¤."}),e.jsx(C,{onClick:i,variant:"primary",size:"lg",children:"ì„¸ê³„ê´€ ìƒì„±í•˜ê¸°"}),x&&e.jsx("p",{className:"text-red-400 mt-4",children:x})]})})]})},G=[{value:"protagonist",label:"ì£¼ì¸ê³µ"},{value:"antagonist",label:"ì ëŒ€ìž"},{value:"supporting",label:"ì¡°ì—°"},{value:"minor",label:"ë‹¨ì—­"}],ce=[{value:"male",label:"ë‚¨ì„±"},{value:"female",label:"ì—¬ì„±"},{value:"non-binary",label:"ë…¼ë°”ì´ë„ˆë¦¬"},{value:"other",label:"ê¸°íƒ€"}],oe=({data:s,updateData:n,isGenerating:a,setIsGenerating:d})=>{const[x,r]=v.useState(null),[i,m]=v.useState(null),l=async()=>{if(!s.planning||!s.worldBuilding){r("ë¨¼ì € ê¸°íšì˜ë„ì„œì™€ ì„¸ê³„ê´€ì„ ìƒì„±í•´ì£¼ì„¸ìš”.");return}d(!0),r(null);try{const t=`
        ì›¹íˆ° ìºë¦­í„°ë“¤ì„ ìƒì„±í•´ì£¼ì„¸ìš”.

        ìž‘í’ˆ ì •ë³´:
        - ì œëª©: ${s.title}
        - ìž¥ë¥´: ${s.genre}
        - ì‹œë†‰ì‹œìŠ¤: ${s.planning.synopsis}
        - ì„¸ê³„ê´€: ${s.worldBuilding.setting}

        ë‹¤ìŒ í˜•ì‹ì˜ JSONìœ¼ë¡œ 4-6ëª…ì˜ ìºë¦­í„°ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”:
        {
          "characters": [
            {
              "name": "ì´ë¦„",
              "koreanName": "í•œêµ­ ì´ë¦„",
              "role": "protagonist|antagonist|supporting|minor",
              "age": ìˆ«ìž,
              "gender": "male|female|non-binary|other",
              "personality": ["ì„±ê²©1", "ì„±ê²©2", "ì„±ê²©3"],
              "appearance": {
                "height": "í‚¤ (ì˜ˆ: 178cm)",
                "bodyType": "ì²´í˜•",
                "skinTone": "í”¼ë¶€í†¤",
                "hairColor": "ë¨¸ë¦¬ìƒ‰",
                "hairStyle": "ë¨¸ë¦¬ ìŠ¤íƒ€ì¼",
                "eyeColor": "ëˆˆ ìƒ‰",
                "eyeShape": "ëˆˆ ëª¨ì–‘",
                "faceShape": "ì–¼êµ´í˜•",
                "distinguishingFeatures": ["íŠ¹ì§•1", "íŠ¹ì§•2"],
                "defaultOutfit": "ê¸°ë³¸ ë³µìž¥",
                "accessories": ["ì•¡ì„¸ì„œë¦¬1"]
              },
              "backstory": "ë°°ê²½ ìŠ¤í† ë¦¬ (2-3ë¬¸ìž¥)",
              "motivation": "ë™ê¸°",
              "arc": "ìºë¦­í„° ì„±ìž¥ ë°©í–¥"
            }
          ]
        }

        ì£¼ì¸ê³µ 1ëª…, ì£¼ìš” ì¡°ì—° 2-3ëª…, ì ëŒ€ìž 1ëª…ì„ í¬í•¨í•´ì£¼ì„¸ìš”.
      `,g=await L.generateText(t,{temperature:.8,maxTokens:8192}),y=O(g);n({characters:y.characters})}catch(t){console.error("Character generation failed:",t),r("ìºë¦­í„° ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}finally{d(!1)}},p=(t,g,y)=>{const b=[...s.characters];if(g.includes(".")){const[k,j]=g.split(".");b[t]={...b[t],[k]:{...b[t][k],[j]:y}}}else b[t]={...b[t],[g]:y};n({characters:b})},c=t=>{const g={protagonist:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",antagonist:"bg-red-500/20 text-red-400 border-red-500/30",supporting:"bg-blue-500/20 text-blue-400 border-blue-500/30",minor:"bg-gray-500/20 text-gray-400 border-gray-500/30"};return g[t]||g.minor};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"ìºë¦­í„° ì„¤ì •"}),e.jsx("p",{className:"text-gray-400",children:"ìž‘í’ˆì— ë“±ìž¥í•˜ëŠ” ìºë¦­í„°ë“¤ì„ ìƒì„±í•©ë‹ˆë‹¤"})]}),s.characters.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:a?e.jsxs("div",{className:"text-center",children:[e.jsx(T,{size:"lg",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"AIê°€ ìºë¦­í„°ë“¤ì„ ìƒì„±í•˜ê³  ìžˆìŠµë‹ˆë‹¤..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-pink-500/20 flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-5xl",children:"ðŸ‘¥"})}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"ìºë¦­í„° ìžë™ ìƒì„±"}),e.jsx("p",{className:"text-gray-400 text-center mb-6 max-w-md",children:"ê¸°íšì„œì™€ ì„¸ê³„ê´€ì„ ë°”íƒ•ìœ¼ë¡œ ë§¤ë ¥ì ì¸ ìºë¦­í„°ë“¤ì„ ìƒì„±í•©ë‹ˆë‹¤."}),e.jsx(C,{onClick:l,variant:"primary",size:"lg",children:"ìºë¦­í„° ìƒì„±í•˜ê¸°"}),x&&e.jsx("p",{className:"text-red-400 mt-4",children:x})]})}):e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-4",children:s.characters.map((t,g)=>{var y,b,k;return e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.1},onClick:()=>m(i===g?null:g),className:`
                  relative cursor-pointer rounded-xl p-4 border-2 transition-all duration-200
                  ${i===g?"border-purple-500 bg-purple-500/10":"border-gray-700 bg-gray-800/50 hover:border-gray-600"}
                `,children:[e.jsx("span",{className:`absolute top-3 right-3 px-2 py-1 rounded-full text-xs font-medium border ${c(t.role)}`,children:(y=G.find(j=>j.value===t.role))==null?void 0:y.label}),e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-2xl mb-3",children:t.gender==="female"?"ðŸ‘©":t.gender==="male"?"ðŸ‘¨":"ðŸ§‘"}),e.jsx("h4",{className:"text-lg font-bold text-white",children:t.name}),e.jsx("p",{className:"text-sm text-gray-400",children:t.koreanName}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.age,"ì„¸ Â· ",(b=t.appearance)==null?void 0:b.height]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:(k=t.personality)==null?void 0:k.slice(0,3).map((j,o)=>e.jsx("span",{className:"text-xs bg-gray-700 text-gray-300 px-2 py-0.5 rounded",children:j},o))})]},g)})}),e.jsx(F,{children:i!==null&&e.jsx(f.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-gray-800/50 rounded-xl border border-gray-700 overflow-hidden",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:["ìºë¦­í„° ìƒì„¸ ì •ë³´ íŽ¸ì§‘",e.jsx("button",{onClick:()=>m(null),className:"ml-auto text-gray-400 hover:text-white",children:"âœ•"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(A,{label:"ì´ë¦„",value:s.characters[i].name,onChange:t=>p(i,"name",t.target.value)}),e.jsx(A,{label:"í•œêµ­ ì´ë¦„",value:s.characters[i].koreanName,onChange:t=>p(i,"koreanName",t.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(J,{label:"ì—­í• ",options:G,value:s.characters[i].role,onChange:t=>p(i,"role",t)}),e.jsx(A,{label:"ë‚˜ì´",type:"number",value:s.characters[i].age,onChange:t=>p(i,"age",Number(t.target.value))}),e.jsx(J,{label:"ì„±ë³„",options:ce,value:s.characters[i].gender,onChange:t=>p(i,"gender",t)})]}),e.jsx(P,{label:"ë°°ê²½ ìŠ¤í† ë¦¬",value:s.characters[i].backstory,onChange:t=>p(i,"backstory",t.target.value),rows:3}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(A,{label:"ë™ê¸°",value:s.characters[i].motivation,onChange:t=>p(i,"motivation",t.target.value)}),e.jsx(A,{label:"ì„±ìž¥ ë°©í–¥",value:s.characters[i].arc,onChange:t=>p(i,"arc",t.target.value)})]})]})})}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(C,{variant:"ghost",onClick:l,disabled:a,loading:a,children:"ì „ì²´ ë‹¤ì‹œ ìƒì„±í•˜ê¸°"})})]})]})},de=({data:s,updateData:n,isGenerating:a,setIsGenerating:d})=>{var p;const[x,r]=v.useState(null),i=async()=>{if(!s.planning||s.characters.length===0){r("ë¨¼ì € ê¸°íšì„œì™€ ìºë¦­í„°ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.");return}d(!0),r(null);try{const c=s.characters.map(b=>`${b.name} (${b.role}): ${b.motivation}`).join(`
`),t=`
        ì›¹íˆ°ì˜ ì „ì²´ ìŠ¤í† ë¦¬ êµ¬ì¡°ë¥¼ ì„¤ê³„í•´ì£¼ì„¸ìš”.

        ìž‘í’ˆ ì •ë³´:
        - ì œëª©: ${s.title}
        - ìž¥ë¥´: ${s.genre}
        - ì‹œë†‰ì‹œìŠ¤: ${s.planning.synopsis}
        - ì˜ˆìƒ íšŒì°¨: ${s.episodeCount}í™”

        ìºë¦­í„°:
        ${c}

        ë‹¤ìŒ í˜•ì‹ì˜ JSONìœ¼ë¡œ ìŠ¤í† ë¦¬ êµ¬ì¡°ë¥¼ ìž‘ì„±í•´ì£¼ì„¸ìš”:
        {
          "acts": [
            {
              "actNumber": 1,
              "title": "ë§‰ ì œëª©",
              "description": "ì´ ë§‰ì˜ ì„¤ëª…",
              "episodeRange": "1-10í™”",
              "keyEvents": ["ì£¼ìš” ì‚¬ê±´1", "ì£¼ìš” ì‚¬ê±´2"],
              "characterFocus": ["ì§‘ì¤‘ ìºë¦­í„°ë“¤"],
              "emotionalTone": "ê°ì • í†¤"
            }
          ],
          "majorPlotPoints": [
            {
              "episode": 1,
              "type": "hook|inciting_incident|first_pinch|midpoint|second_pinch|climax|resolution",
              "description": "ì„¤ëª…"
            }
          ],
          "subplots": [
            {
              "title": "ì„œë¸Œí”Œë¡¯ ì œëª©",
              "characters": ["ê´€ë ¨ ìºë¦­í„°"],
              "description": "ì„¤ëª…",
              "resolution": "í•´ê²° ë°©í–¥"
            }
          ],
          "themes": ["í…Œë§ˆ1", "í…Œë§ˆ2"]
        }

        3ë§‰ êµ¬ì¡°ë¡œ ì„¤ê³„í•´ì£¼ì„¸ìš”.
      `,g=await L.generateText(t,{temperature:.7,maxTokens:8192}),y=O(g);n({storyStructure:y})}catch(c){console.error("Story structure generation failed:",c),r("ìŠ¤í† ë¦¬ êµ¬ì¡° ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}finally{d(!1)}},m=c=>({hook:"bg-green-500",inciting_incident:"bg-blue-500",first_pinch:"bg-yellow-500",midpoint:"bg-purple-500",second_pinch:"bg-orange-500",climax:"bg-red-500",resolution:"bg-pink-500"})[c]||"bg-gray-500",l=c=>({hook:"í›…",inciting_incident:"ë°œë‹¨",first_pinch:"ì²« ë²ˆì§¸ ìœ„ê¸°",midpoint:"ì¤‘ê°„ì ",second_pinch:"ë‘ ë²ˆì§¸ ìœ„ê¸°",climax:"í´ë¼ì´ë§¥ìŠ¤",resolution:"ê²°ë§"})[c]||c;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"ìŠ¤í† ë¦¬ êµ¬ì¡°"}),e.jsx("p",{className:"text-gray-400",children:"ì „ì²´ ìŠ¤í† ë¦¬ì˜ êµ¬ì¡°ì™€ ì£¼ìš” í”Œë¡¯ í¬ì¸íŠ¸ë¥¼ ì„¤ê³„í•©ë‹ˆë‹¤"})]}),s.storyStructure?e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"ë§‰ êµ¬ì„±"}),s.storyStructure.acts.map((c,t)=>{var g;return e.jsx(f.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:t*.1},className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-xl font-bold text-white flex-shrink-0",children:c.actNumber}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:c.title}),e.jsx("p",{className:"text-sm text-purple-400 mb-2",children:c.episodeRange}),e.jsx(P,{value:c.description,onChange:y=>{var k,j,o,u;const b=[...((k=s.storyStructure)==null?void 0:k.acts)||[]];b[t]={...c,description:y.target.value},n({storyStructure:{acts:b,majorPlotPoints:((j=s.storyStructure)==null?void 0:j.majorPlotPoints)||[],subplots:((o=s.storyStructure)==null?void 0:o.subplots)||[],themes:((u=s.storyStructure)==null?void 0:u.themes)||[]}})},rows:2,className:"bg-gray-700/50 mb-2"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx("span",{className:"text-xs bg-gray-700 text-gray-300 px-2 py-1 rounded",children:c.emotionalTone}),(g=c.characterFocus)==null?void 0:g.map((y,b)=>e.jsx("span",{className:"text-xs bg-purple-500/20 text-purple-400 px-2 py-1 rounded",children:y},b))]})]})]})},t)})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"ì£¼ìš” í”Œë¡¯ í¬ì¸íŠ¸"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-700"}),e.jsx("div",{className:"space-y-4",children:(p=s.storyStructure.majorPlotPoints)==null?void 0:p.map((c,t)=>e.jsxs(f.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:t*.05},className:"flex items-start gap-4 relative",children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${m(c.type)} flex items-center justify-center text-white font-bold z-10`,children:c.episode}),e.jsxs("div",{className:"flex-1 bg-gray-700/50 rounded-lg p-4",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${m(c.type)} bg-opacity-20 mb-2`,children:l(c.type)}),e.jsx("p",{className:"text-white",children:c.description})]})]},t))})]})]}),s.storyStructure.subplots&&s.storyStructure.subplots.length>0&&e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"ì„œë¸Œí”Œë¡¯"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.storyStructure.subplots.map((c,t)=>{var g;return e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-white mb-1",children:c.title}),e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:c.description}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(g=c.characters)==null?void 0:g.map((y,b)=>e.jsx("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded",children:y},b))})]},t)})})]}),s.storyStructure.themes&&e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"í•µì‹¬ í…Œë§ˆ"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.storyStructure.themes.map((c,t)=>e.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-white rounded-full border border-purple-500/30",children:c},t))})]}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(C,{variant:"ghost",onClick:i,disabled:a,loading:a,children:"ë‹¤ì‹œ ìƒì„±í•˜ê¸°"})})]}):e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:a?e.jsxs("div",{className:"text-center",children:[e.jsx(T,{size:"lg",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"AIê°€ ìŠ¤í† ë¦¬ êµ¬ì¡°ë¥¼ ì„¤ê³„í•˜ê³  ìžˆìŠµë‹ˆë‹¤..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-orange-500/20 flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-5xl",children:"ðŸ“Š"})}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"ìŠ¤í† ë¦¬ êµ¬ì¡° ìƒì„±"}),e.jsx("p",{className:"text-gray-400 text-center mb-6 max-w-md",children:"3ë§‰ êµ¬ì¡°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì „ì²´ ìŠ¤í† ë¦¬ íë¦„ì„ ì„¤ê³„í•©ë‹ˆë‹¤."}),e.jsx(C,{onClick:i,variant:"primary",size:"lg",children:"ìŠ¤í† ë¦¬ êµ¬ì¡° ìƒì„±í•˜ê¸°"}),x&&e.jsx("p",{className:"text-red-400 mt-4",children:x})]})})]})},xe=({data:s,updateData:n,isGenerating:a,setIsGenerating:d})=>{var j;const[x,r]=v.useState(null),[i,m]=v.useState(null),[l,p]=v.useState(5),c=async()=>{var o;if(!s.storyStructure){r("ë¨¼ì € ìŠ¤í† ë¦¬ êµ¬ì¡°ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.");return}d(!0),r(null);try{const u=s.episodePlans.length+1,w=Math.min(u+l-1,s.episodeCount),N=s.episodePlans.length>0?`
        [ì´ë¯¸ ìž‘ì„±ëœ ì—í”¼ì†Œë“œ - ì´ì–´ì„œ ìž‘ì„±í•´ì£¼ì„¸ìš”]
        ${s.episodePlans.map(S=>`${S.episodeNumber}í™” "${S.title}": ${S.summary} (ì—”ë”©: ${S.endingHook})`).join(`
        `)}

        ìœ„ ë‚´ìš©ì— ì´ì–´ì„œ ìžì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°ë˜ëŠ” ìƒˆë¡œìš´ ì—í”¼ì†Œë“œë¥¼ ìž‘ì„±í•´ì£¼ì„¸ìš”.
        ì´ì „ ì—í”¼ì†Œë“œì™€ ë‚´ìš©ì´ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.
        `:"",$=`
        ì›¹íˆ° ì—í”¼ì†Œë“œ í”Œëžœì„ ìž‘ì„±í•´ì£¼ì„¸ìš”.

        ìž‘í’ˆ ì •ë³´:
        - ì œëª©: ${s.title}
        - ìž¥ë¥´: ${s.genre}
        - ì´ ${s.episodeCount}í™” ì™„ê²°
        - ì‹œë†‰ì‹œìŠ¤: ${(o=s.planning)==null?void 0:o.synopsis}

        ìŠ¤í† ë¦¬ êµ¬ì¡°:
        ${JSON.stringify(s.storyStructure.acts,null,2)}

        ìºë¦­í„°:
        ${s.characters.map(S=>`${S.name}: ${S.role}`).join(", ")}
        ${N}

        ${u}í™”ë¶€í„° ${w}í™”ê¹Œì§€ì˜ **ìƒˆë¡œìš´** ì—í”¼ì†Œë“œ í”Œëžœì„ ìž‘ì„±í•´ì£¼ì„¸ìš”.
        - ì´ì „ ì—í”¼ì†Œë“œì™€ ë‚´ìš©ì´ ê²¹ì¹˜ë©´ ì•ˆ ë©ë‹ˆë‹¤
        - ìŠ¤í† ë¦¬ê°€ ìžì—°ìŠ¤ëŸ½ê²Œ ì§„í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤
        - ì „ì²´ ${s.episodeCount}í™” ì¤‘ í˜„ìž¬ ${u}~${w}í™” êµ¬ê°„ìž…ë‹ˆë‹¤

        JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”:
        {
          "episodes": [
            {
              "episodeNumber": ìˆ«ìž,
              "title": "ì—í”¼ì†Œë“œ ì œëª© (ì´ì „ê³¼ ë‹¤ë¥¸ ìƒˆë¡œìš´ ì œëª©)",
              "summary": "ì—í”¼ì†Œë“œ ìš”ì•½ (3-4ë¬¸ìž¥, ìƒˆë¡œìš´ ë‚´ìš©)",
              "keyEvents": ["ì£¼ìš” ì‚¬ê±´1", "ì£¼ìš” ì‚¬ê±´2"],
              "emotionalArc": "exposition|rising|climax|falling|resolution",
              "endingHook": "ë‹¤ìŒ í™” ë–¡ë°¥/ê¶ê¸ˆì¦ ìœ ë°œ ìš”ì†Œ",
              "characters": ["ë“±ìž¥ ìºë¦­í„°"],
              "locations": ["ë“±ìž¥ ìž¥ì†Œ"]
            }
          ]
        }
      `,z=await L.generateText($,{temperature:.7,maxTokens:8192}),I=O(z).episodes.map((S,M)=>({...S,episodeNumber:u+M}));n({episodePlans:[...s.episodePlans,...I]})}catch(u){console.error("Episode plan generation failed:",u),r("ì—í”¼ì†Œë“œ í”Œëžœ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}finally{d(!1)}},t=(o,u,w)=>{const N=[...s.episodePlans];N[o]={...N[o],[u]:w},n({episodePlans:N})},g=o=>{if(!confirm(`${s.episodePlans[o].episodeNumber}í™”ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`))return;const w=s.episodePlans.filter((N,$)=>$!==o).map((N,$)=>({...N,episodeNumber:$+1}));n({episodePlans:w}),i===o?m(null):i!==null&&i>o&&m(i-1)},y=()=>{confirm("ëª¨ë“  ì—í”¼ì†Œë“œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(n({episodePlans:[]}),m(null))},b=o=>({exposition:"primary",rising:"warning",climax:"danger",falling:"info",resolution:"success"})[o]||"default",k=o=>({exposition:"ë°œë‹¨",rising:"ìƒìŠ¹",climax:"ì ˆì •",falling:"í•˜ê°•",resolution:"ê²°ë§"})[o]||o;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"ì—í”¼ì†Œë“œ í”Œëžœ"}),e.jsx("p",{className:"text-gray-400",children:"ê° ì—í”¼ì†Œë“œì˜ ë‚´ìš©ì„ ê³„íší•©ë‹ˆë‹¤"})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"ì—í”¼ì†Œë“œ ê³„íš ì§„í–‰"}),e.jsxs("span",{className:"text-white font-medium",children:[s.episodePlans.length," / ",s.episodeCount,"í™”"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-300",style:{width:`${s.episodePlans.length/s.episodeCount*100}%`}})})]}),s.episodePlans.length===0&&!a?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-green-500/20 flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-5xl",children:"ðŸ“"})}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"ì—í”¼ì†Œë“œ í”Œëžœ ìƒì„±"}),e.jsx("p",{className:"text-gray-400 text-center mb-6 max-w-md",children:"ìŠ¤í† ë¦¬ êµ¬ì¡°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê° ì—í”¼ì†Œë“œì˜ ìƒì„¸ ê³„íšì„ ìž‘ì„±í•©ë‹ˆë‹¤."}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("span",{className:"text-gray-400",children:"ìƒì„±í•  ì—í”¼ì†Œë“œ ìˆ˜:"}),e.jsx("select",{value:l,onChange:o=>p(Number(o.target.value)),className:"bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[3,5,10].map(o=>e.jsxs("option",{value:o,children:[o,"í™”"]},o))})]}),e.jsx(C,{onClick:c,variant:"primary",size:"lg",children:"ì—í”¼ì†Œë“œ í”Œëžœ ìƒì„±í•˜ê¸°"}),x&&e.jsx("p",{className:"text-red-400 mt-4",children:x})]}):e.jsxs("div",{className:"space-y-4",children:[a&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(T,{size:"lg",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"AIê°€ ì—í”¼ì†Œë“œë¥¼ ê³„íší•˜ê³  ìžˆìŠµë‹ˆë‹¤..."})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.episodePlans.map((o,u)=>{var w;return e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.05},className:`
                  relative rounded-xl p-4 border-2 transition-all duration-200
                  ${i===u?"border-purple-500 bg-purple-500/10":"border-gray-700 bg-gray-800/50 hover:border-gray-600"}
                `,children:[e.jsx("button",{onClick:N=>{N.stopPropagation(),g(u)},className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-red-500/20 hover:bg-red-500/40 flex items-center justify-center text-red-400 hover:text-red-300 transition-colors",title:"ì—í”¼ì†Œë“œ ì‚­ì œ",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{onClick:()=>m(i===u?null:u),className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2 pr-6",children:[e.jsx("span",{className:"text-3xl font-bold text-purple-400",children:o.episodeNumber}),e.jsx(W,{variant:b(o.emotionalArc),children:k(o.emotionalArc)})]}),e.jsx("h4",{className:"text-lg font-bold text-white mb-2",children:o.title}),e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:o.summary}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:(w=o.characters)==null?void 0:w.slice(0,3).map((N,$)=>e.jsx("span",{className:"text-xs bg-gray-700 text-gray-300 px-2 py-0.5 rounded",children:N},$))})]})]},u)})}),e.jsx(F,{children:i!==null&&e.jsx(f.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-gray-800/50 rounded-xl border border-gray-700 overflow-hidden",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white flex items-center justify-between",children:[s.episodePlans[i].episodeNumber,"í™” ìƒì„¸ íŽ¸ì§‘",e.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-white",children:"âœ•"})]}),e.jsx(P,{label:"ì œëª©",value:s.episodePlans[i].title,onChange:o=>t(i,"title",o.target.value),rows:1}),e.jsx(P,{label:"ìš”ì•½",value:s.episodePlans[i].summary,onChange:o=>t(i,"summary",o.target.value),rows:3}),e.jsx(P,{label:"ì—”ë”© í›… (ë–¡ë°¥)",value:s.episodePlans[i].endingHook,onChange:o=>t(i,"endingHook",o.target.value),rows:2,helperText:"ë‹¤ìŒ í™”ë¡œ ì´ì–´ì§€ëŠ” ê¶ê¸ˆì¦ì„ ìœ ë°œí•˜ëŠ” ìš”ì†Œ"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"ì£¼ìš” ì‚¬ê±´"}),(j=s.episodePlans[i].keyEvents)==null?void 0:j.map((o,u)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"text-purple-400",children:[u+1,"."]}),e.jsx("input",{type:"text",value:o,onChange:w=>{const N=[...s.episodePlans[i].keyEvents];N[u]=w.target.value,t(i,"keyEvents",N)},className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]},u))]})]})})}),!a&&e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[s.episodePlans.length>0&&e.jsx(C,{onClick:y,variant:"danger",size:"sm",children:"ì „ì²´ ì‚­ì œ"}),s.episodePlans.length===0&&e.jsx("div",{}),s.episodePlans.length<s.episodeCount&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("select",{value:l,onChange:o=>p(Number(o.target.value)),className:"bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[3,5,10].map(o=>e.jsxs("option",{value:o,children:[o,"í™” ì¶”ê°€"]},o))}),e.jsx(C,{onClick:c,variant:"primary",children:"ë‹¤ìŒ ì—í”¼ì†Œë“œ ìƒì„±"})]})]})]})]})},me=({data:s})=>{const a=(()=>{let d=0;const x=6;return s.title&&s.briefConcept&&d++,s.genre&&s.artStyle&&d++,s.planning&&d++,s.worldBuilding&&d++,s.characters.length>0&&d++,s.episodePlans.length>0&&d++,d/x*100})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"ìµœì¢… ê²€í† "}),e.jsx("p",{className:"text-gray-400",children:"í”„ë¡œì íŠ¸ ì„¤ì •ì„ í™•ì¸í•˜ê³  ìƒì„±ì„ ì™„ë£Œí•˜ì„¸ìš”"})]}),e.jsxs(E,{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-purple-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"í”„ë¡œì íŠ¸ ì™„ì„±ë„"}),e.jsxs("span",{className:"text-2xl font-bold text-purple-400",children:[Math.round(a),"%"]})]}),e.jsx(D,{value:a,color:"primary",size:"lg"})]}),e.jsxs(E,{children:[e.jsxs("h3",{className:"text-lg font-medium text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ“‹"})," ê¸°ë³¸ ì •ë³´"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"ì œëª©"}),e.jsx("p",{className:"text-white font-medium",children:s.title||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"ìž¥ë¥´"}),e.jsxs("p",{className:"text-white font-medium",children:[s.genre||"-",s.subGenres.length>0&&e.jsxs("span",{className:"text-gray-400 text-sm ml-2",children:["(",s.subGenres.join(", "),")"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"ì•„íŠ¸ ìŠ¤íƒ€ì¼"}),e.jsx("p",{className:"text-white font-medium",children:s.artStyle||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"ì˜ˆìƒ íšŒì°¨"}),e.jsxs("p",{className:"text-white font-medium",children:[s.episodeCount,"í™”"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"ì»¨ì…‰"}),e.jsx("p",{className:"text-white",children:s.briefConcept||"-"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"ë¶„ìœ„ê¸°"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:s.mood.map((d,x)=>e.jsx(W,{variant:"primary",children:d},x))})]})]}),s.planning&&e.jsxs(E,{children:[e.jsxs("h3",{className:"text-lg font-medium text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ’¡"})," ê¸°íšì˜ë„ì„œ"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"ì‹œë†‰ì‹œìŠ¤"}),e.jsx("p",{className:"text-white text-sm",children:s.planning.synopsis})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"í•µì‹¬ ë©”ì‹œì§€"}),e.jsx("p",{className:"text-white text-sm",children:s.planning.coreMessage})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"ì°¨ë³„í™” í¬ì¸íŠ¸"}),e.jsx("ul",{className:"text-white text-sm list-disc list-inside",children:s.planning.uniquePoints.map((d,x)=>e.jsx("li",{children:d},x))})]})]})]}),e.jsxs(E,{children:[e.jsxs("h3",{className:"text-lg font-medium text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ‘¥"})," ìºë¦­í„° (",s.characters.length,"ëª…)"]}),s.characters.length>0?e.jsx("div",{className:"grid grid-cols-3 gap-3",children:s.characters.map((d,x)=>e.jsxs(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:x*.1},className:"bg-gray-700/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xl",children:d.gender==="female"?"ðŸ‘©":d.gender==="male"?"ðŸ‘¨":"ðŸ§‘"}),e.jsx("span",{className:"font-medium text-white",children:d.name})]}),e.jsx(W,{variant:d.role==="protagonist"?"warning":d.role==="antagonist"?"danger":"default",size:"sm",children:d.role==="protagonist"?"ì£¼ì¸ê³µ":d.role==="antagonist"?"ì ëŒ€ìž":d.role==="supporting"?"ì¡°ì—°":"ë‹¨ì—­"})]},x))}):e.jsx("p",{className:"text-gray-400",children:"ìºë¦­í„°ê°€ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."})]}),e.jsxs(E,{children:[e.jsxs("h3",{className:"text-lg font-medium text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ“"})," ì—í”¼ì†Œë“œ í”Œëžœ (",s.episodePlans.length,"/",s.episodeCount,"í™”)"]}),s.episodePlans.length>0?e.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[s.episodePlans.slice(0,10).map((d,x)=>e.jsxs("div",{className:"flex items-center gap-3 bg-gray-700/50 rounded-lg p-2",children:[e.jsx("span",{className:"text-lg font-bold text-purple-400 w-8",children:d.episodeNumber}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-white text-sm font-medium",children:d.title})}),e.jsx(W,{variant:"default",size:"sm",children:d.emotionalArc})]},x)),s.episodePlans.length>10&&e.jsxs("p",{className:"text-gray-400 text-center text-sm",children:["... ì™¸ ",s.episodePlans.length-10,"í™” ë”"]})]}):e.jsx("p",{className:"text-gray-400",children:"ì—í”¼ì†Œë“œ í”Œëžœì´ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."})]}),e.jsxs(E,{className:"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-500/20",children:[e.jsxs("h3",{className:"text-lg font-medium text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ’°"})," ì˜ˆìƒ ë¹„ìš©"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["$",(s.episodeCount*20*.003+s.episodeCount*.01).toFixed(2)]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"ì´ë¯¸ì§€ ìƒì„±"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:["$",(s.episodeCount*.005).toFixed(2)]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"í…ìŠ¤íŠ¸ ìƒì„±"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-400",children:["$",(s.episodeCount*20*.003+s.episodeCount*.015).toFixed(2)]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"ì´ ì˜ˆìƒ"})]})]}),e.jsx("p",{className:"text-gray-500 text-sm mt-4 text-center",children:"* ìºì‹œ ì ìš© ì‹œ ì•½ 30-40% ì ˆê° ê°€ëŠ¥"})]}),a>=50?e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-xl p-6 border border-purple-500/30 text-center",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:"ðŸŽ‰"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"í”„ë¡œì íŠ¸ ìƒì„± ì¤€ë¹„ ì™„ë£Œ!"}),e.jsx("p",{className:"text-gray-400",children:'ì•„ëž˜ "í”„ë¡œì íŠ¸ ìƒì„±" ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì›¹íˆ° ì œìž‘ì„ ì‹œìž‘í•˜ì„¸ìš”.'})]}):e.jsxs("div",{className:"bg-yellow-500/10 rounded-xl p-6 border border-yellow-500/30 text-center",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:"âš ï¸"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"ì¶”ê°€ ì„¤ì • í•„ìš”"}),e.jsx("p",{className:"text-gray-400",children:"ë” ë‚˜ì€ ê²°ê³¼ë¥¼ ìœ„í•´ ì´ì „ ë‹¨ê³„ì—ì„œ ëˆ„ë½ëœ í•­ëª©ì„ ì™„ì„±í•´ì£¼ì„¸ìš”."})]})]})},pe=({steps:s,currentStep:n,onStepClick:a})=>e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"flex items-center justify-between",children:s.map((d,x)=>{const r=x<n,i=x===n,m=x<=n&&a;return e.jsxs(U.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(f.button,{onClick:()=>m&&a(x),disabled:!m,className:`
                    relative w-10 h-10 rounded-full flex items-center justify-center
                    font-medium text-sm transition-all duration-300
                    ${m?"cursor-pointer":"cursor-default"}
                    ${r?"bg-green-500 text-white":i?"bg-purple-600 text-white ring-4 ring-purple-500/30":"bg-gray-700 text-gray-400"}
                  `,whileHover:m?{scale:1.1}:void 0,whileTap:m?{scale:.95}:void 0,children:r?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):x+1}),e.jsx("span",{className:`
                    mt-2 text-xs font-medium whitespace-nowrap
                    ${i?"text-purple-400":r?"text-green-400":"text-gray-500"}
                  `,children:d.title})]}),x<s.length-1&&e.jsx("div",{className:"flex-1 mx-2 h-0.5 bg-gray-700 relative",children:e.jsx(f.div,{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-green-500 to-purple-500",initial:{width:0},animate:{width:r?"100%":i?"50%":"0%"},transition:{duration:.3}})})]},d.id)})})}),R=[{id:"basic",title:"ê¸°ë³¸ ì •ë³´",component:se},{id:"genre",title:"ìž¥ë¥´ & ìŠ¤íƒ€ì¼",component:le},{id:"planning",title:"AI ê¸°íš",component:ie},{id:"world",title:"ì„¸ê³„ê´€",component:ae},{id:"character",title:"ìºë¦­í„°",component:oe},{id:"story",title:"ìŠ¤í† ë¦¬ êµ¬ì¡°",component:de},{id:"episode",title:"ì—í”¼ì†Œë“œ",component:xe},{id:"review",title:"ìµœì¢… í™•ì¸",component:me}],he={title:"",briefConcept:"",targetAudience:"all",episodeCount:10,genre:"",subGenres:[],mood:[],artStyle:"korean-webtoon",characters:[],episodePlans:[]},ge=()=>{const[s,n]=v.useState(0),[a,d]=v.useState(he),[x,r]=v.useState(!1),[i,m]=v.useState(null),l=X(),{createProject:p}=_(),c=R[s].component,t=v.useCallback(j=>{d(o=>({...o,...j}))},[]),g=v.useCallback(()=>{s<R.length-1&&n(j=>j+1)},[s]),y=v.useCallback(()=>{s>0&&n(j=>j-1)},[s]),b=v.useCallback(j=>{j<=s&&n(j)},[s]),k=v.useCallback(async()=>{var j,o,u,w,N,$,z,H,I,S,M;try{r(!0);const B=await p({title:a.title,genre:a.genre,targetAudience:a.targetAudience,mood:a.mood,briefConcept:a.briefConcept,artStyle:a.artStyle,episodeCount:a.episodeCount}),{updateProject:Q,addCharacter:K,addEpisode:V}=_.getState();await Q(B.id,{planning:a.planning,worldBuilding:a.worldBuilding,subGenres:a.subGenres});for(const h of a.characters)await K(B.id,{name:h.name||"",koreanName:h.koreanName||h.name||"",role:h.role||"supporting",age:h.age||20,gender:h.gender||"other",personality:h.personality||[],appearance:{height:((j=h.appearance)==null?void 0:j.height)||"",bodyType:((o=h.appearance)==null?void 0:o.bodyType)||"",skinTone:((u=h.appearance)==null?void 0:u.skinTone)||"",hairColor:((w=h.appearance)==null?void 0:w.hairColor)||"",hairStyle:((N=h.appearance)==null?void 0:N.hairStyle)||"",eyeColor:(($=h.appearance)==null?void 0:$.eyeColor)||"",eyeShape:((z=h.appearance)==null?void 0:z.eyeShape)||"",faceShape:((H=h.appearance)==null?void 0:H.faceShape)||"",distinguishingFeatures:((I=h.appearance)==null?void 0:I.distinguishingFeatures)||[],defaultOutfit:((S=h.appearance)==null?void 0:S.defaultOutfit)||"",accessories:((M=h.appearance)==null?void 0:M.accessories)||[]},backstory:h.backstory||h.background||"",motivation:h.motivation||"",arc:h.arc||"",relationships:h.relationships||[],speechPattern:h.speechPattern||{formality:"casual",vocabulary:[],speechHabits:[],emotionalTendency:""},visualPrompt:h.visualPrompt||"",referenceImages:h.referenceImages||[],expressions:h.expressions||[],poses:h.poses||[],outfits:h.outfits||[]});for(const h of a.episodePlans)await V(B.id,{episodeNumber:h.episodeNumber,title:h.title,summary:h.summary||"",status:"planning",panels:[],keyEvents:h.keyEvents||[],emotionalArc:h.emotionalArc||"exposition",endingHook:h.endingHook||"",characters:h.characters||[],locations:h.locations||[],wordCount:0,estimatedReadTime:0,translations:new Map});m({message:"í”„ë¡œì íŠ¸ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!",type:"success"}),setTimeout(()=>{l(`/editor/${B.id}`)},1500)}catch(B){console.error("Project creation failed:",B),m({message:"í”„ë¡œì íŠ¸ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",type:"error"})}finally{r(!1)}},[a,p,l]);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900",children:[e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("button",{onClick:()=>l("/"),className:"flex items-center text-gray-400 hover:text-white transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"ëŒì•„ê°€ê¸°"]}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"ìƒˆ ì›¹íˆ° í”„ë¡œì íŠ¸"}),e.jsx("div",{className:"w-24"})]}),e.jsx(pe,{steps:R,currentStep:s,onStepClick:b}),e.jsx("div",{className:"mt-8 bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 border border-gray-700",children:e.jsx(F,{mode:"wait",children:e.jsx(f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:e.jsx(c,{data:a,updateData:t,onNext:g,isGenerating:x,setIsGenerating:r})},s)})}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsx(C,{variant:"ghost",onClick:y,disabled:s===0,children:"ì´ì „"}),e.jsx("div",{className:"flex gap-3",children:s<R.length-1?e.jsx(C,{variant:"primary",onClick:g,disabled:x,children:"ë‹¤ìŒ"}):e.jsx(C,{variant:"primary",onClick:k,disabled:x,loading:x,children:"í”„ë¡œì íŠ¸ ìƒì„±"})})]})]}),e.jsx(F,{children:i&&e.jsx(Z,{message:i.message,type:i.type,onClose:()=>m(null)})})]})},Se=()=>e.jsx(ge,{});export{Se as default};
