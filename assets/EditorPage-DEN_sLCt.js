import{j as e,m as q,A as ls}from"./ui-D_LkVF2r.js";import{r as _,e as cs,u as ds}from"./vendor-Vqvh67Lm.js";import{B as P}from"./Button-C3O7gUUW.js";import{u as Ze,c as We,L as _e,d as ms}from"./index-CGg5rOpu.js";import{D as Ve,p as Je}from"./parseJsonResponse-BC4W7KvA.js";import{g as Fe,C as Ge}from"./GeminiService-CuSaiY5Y.js";import"./storage-BBQgdv-R.js";import"./ai-BpRkNtKl.js";const Qe=({tabs:s,activeTab:g,onChange:t,variant:r="default",size:p="md",fullWidth:o=!1,className:h=""})=>{const m={sm:"px-3 py-1.5 text-sm gap-1.5",md:"px-4 py-2 text-base gap-2",lg:"px-5 py-2.5 text-lg gap-2.5"};return(()=>{switch(r){case"pills":return e.jsx("div",{className:`flex gap-2 ${o?"w-full":""} ${h}`,children:s.map(n=>e.jsxs("button",{onClick:()=>!n.disabled&&t(n.id),disabled:n.disabled,className:`
                  flex items-center ${m[p]} rounded-lg
                  font-medium transition-all duration-200
                  ${o?"flex-1 justify-center":""}
                  ${n.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                  ${g===n.id?"bg-purple-600 text-white":"bg-gray-700 text-gray-400 hover:text-white hover:bg-gray-600"}
                `,children:[n.icon,n.label]},n.id))});case"underline":return e.jsx("div",{className:`flex border-b border-gray-700 ${o?"w-full":""} ${h}`,children:s.map(n=>e.jsxs("button",{onClick:()=>!n.disabled&&t(n.id),disabled:n.disabled,className:`
                  relative flex items-center ${m[p]}
                  font-medium transition-colors duration-200
                  ${o?"flex-1 justify-center":""}
                  ${n.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                  ${g===n.id?"text-purple-400":"text-gray-400 hover:text-white"}
                `,children:[n.icon,n.label,g===n.id&&e.jsx(q.div,{layoutId:"underline",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-purple-500"})]},n.id))});default:return e.jsx("div",{className:`
              flex bg-gray-800 rounded-lg p-1
              ${o?"w-full":"inline-flex"}
              ${h}
            `,children:s.map(n=>e.jsxs("button",{onClick:()=>!n.disabled&&t(n.id),disabled:n.disabled,className:`
                  relative flex items-center ${m[p]} rounded-md
                  font-medium transition-all duration-200
                  ${o?"flex-1 justify-center":""}
                  ${n.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                  ${g===n.id?"text-white":"text-gray-400 hover:text-white"}
                `,children:[g===n.id&&e.jsx(q.div,{layoutId:"activeTab",className:"absolute inset-0 bg-gray-700 rounded-md",transition:{type:"spring",stiffness:500,damping:30}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[n.icon,n.label]})]},n.id))})}})()};async function gs(s,g){const{text:t,fontSize:r=26,fontFamily:p="'Noto Sans KR', 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif",maxWidth:o=400,bubbleStyle:h="normal"}=g;return t.trim()?new Promise((m,C)=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>{const y=document.createElement("canvas").getContext("2d");if(!y){C(new Error("Canvas context not available"));return}y.font=`bold ${r}px ${p}`;const he=hs(y,t,o),Q=r*1.5,je=he.length*Q,L=20,R=je+L*2,O=document.createElement("canvas"),b=O.getContext("2d");if(!b){C(new Error("Canvas context not available"));return}O.width=n.width,O.height=n.height+R,b.fillStyle="#ffffff",b.fillRect(0,0,O.width,R),b.strokeStyle="#e0e0e0",b.lineWidth=1,b.beginPath(),b.moveTo(0,R),b.lineTo(O.width,R),b.stroke(),b.drawImage(n,0,R),b.font=`bold ${r}px ${p}`,b.textAlign="center",b.textBaseline="top",h==="shout"?b.fillStyle="#d32f2f":h==="thought"?b.fillStyle="#666666":b.fillStyle="#1a1a1a";const ee=L;he.forEach((ae,i)=>{b.fillText(ae,O.width/2,ee+i*Q)}),m(O.toDataURL("image/png"))},n.onerror=()=>{C(new Error("Failed to load image"))},n.src=s}):s}function hs(s,g,t){const r=[],p=g.split(/(\s+)/);let o="";for(const h of p){if(!h)continue;const m=o+h;if(s.measureText(m).width>t&&o.length>0){if(r.push(o.trim()),o=h,s.measureText(h).width>t){const n=h.split("");o="";for(const f of n){const y=o+f;s.measureText(y).width>t&&o.length>0?(r.push(o),o=f):o=y}}}else o=m}return o.trim()&&r.push(o.trim()),r}const us=[{value:"full",label:"ì „ì²´"},{value:"large",label:"ëŒ€í˜•"},{value:"medium",label:"ì¤‘í˜•"},{value:"small",label:"ì†Œí˜•"},{value:"wide",label:"ê°€ë¡œí˜•"},{value:"tall",label:"ì„¸ë¡œí˜•"}],ps=[{value:"close-up",label:"í´ë¡œì¦ˆì—…"},{value:"medium-shot",label:"ë¯¸ë””ì—„ìƒ·"},{value:"wide-shot",label:"ì™€ì´ë“œìƒ·"},{value:"extreme-close-up",label:"ìµìŠ¤íŠ¸ë¦¼ í´ë¡œì¦ˆì—…"},{value:"bird-eye",label:"ë²„ë“œì•„ì´"},{value:"worm-eye",label:"ì›œì•„ì´"},{value:"dutch-angle",label:"ë”ì¹˜ì•µê¸€"},{value:"over-shoulder",label:"ì˜¤ë²„ìˆ„ë”"},{value:"pov",label:"POV"}],xs=({panel:s,episodeId:g,onUpdate:t})=>{var O,b,ee,ae;const[r,p]=_.useState(!1),[o,h]=_.useState(null),[m,C]=_.useState(""),{currentProject:n}=Ze(),{addToast:f}=We(),y=async(i="preview")=>{var S,ne,Ee,Pe,Te,Ne,Ae,Le,ie,ue,pe,De,ze,a,w,j;if(n){p(!0);try{const k=n.episodes.find(N=>N.panels.some(d=>d.id===s.id)),W=(k==null?void 0:k.panels.findIndex(N=>N.id===s.id))??-1;let xe="";if(k&&W>0){const N=Math.max(0,W-5),d=k.panels.slice(N,W);d.length>0&&(xe=`

PREVIOUS PANELS CONTEXT (CRITICAL - maintain EXACT visual consistency):
${d.map((U,be)=>{var le;const ve=U.characters.map(u=>{var ke,$e,Ce;const ce=n.characters.find(de=>de.name===u.characterName||de.koreanName===u.characterName);if(ce){const de=((ke=ce.appearance)==null?void 0:ke.hairColor)||"black",me=(($e=ce.appearance)==null?void 0:$e.hairStyle)||"",He=(((Ce=ce.appearance)==null?void 0:Ce.distinguishingFeatures)||[]).some(Re=>/ì•ˆê²½|glasses/i.test(Re)),Ke=/ë¬¶|ponytail|bun|tied|updo/i.test(me),ge=/ë‹¨ë°œ|short|bob/i.test(me),Be=/ííŠ¸ëŸ¬|messy|disheveled|unkempt/i.test(me);let we=`${de} ${me} hair`;return Ke&&(we+=" (TIED UP)"),ge&&(we+=" (SHORT)"),Be&&(we+=" (MESSY/DISHEVELED)"),`${u.characterName}: ${we}${He?", WEARING GLASSES":""}`}return u.characterName}).join("; ");return`Panel ${N+be+1}: ${((le=U.composition)==null?void 0:le.slice(0,100))||"no description"} [Characters: ${ve}] [Camera: ${U.cameraAngle}] [Mood: ${U.mood||"neutral"}]`}).join(`
`)}

âš ï¸ HAIRSTYLE CONSISTENCY: If a character has tied hair/ponytail/bun in previous panels, they MUST have the SAME hairstyle. If they wear glasses, they MUST still wear glasses. Do NOT change hairstyles or accessories between panels unless the story explicitly shows them changing.`)}const oe=s.composition||((S=s.background)==null?void 0:S.description)||"",D=n.worldBuilding,H=(D==null?void 0:D.era)||"",z=(D==null?void 0:D.setting)||"",V=/í˜„ëŒ€|modern|ì‚¬ë¬´ì‹¤|office|ì•„íŒŒíŠ¸|apartment|ë„ì‹œ|city|ìŠ¤ë§ˆíŠ¸í°|ì»´í“¨í„°|ë…¸íŠ¸ë¶|ë¹Œë”©|building|í•™êµ|school|ì¹´íŽ˜|cafe|ë²„ìŠ¤|bus|ì§€í•˜ì² |subway|ë³‘ì›|hospital/i.test(oe),c=/ê³ ëŒ€|ancient|ê³ êµ¬ë ¤|ì‚¼êµ­|ì¡°ì„ |ê³ ë ¤|í•œë³µ|ì „í†µ|ê¶ê¶|palace|ì„±ê³½|castle|ì´ˆê°€|ì›€ë§‰|í•œì˜¥|hanok/i.test(oe),G=/í˜„ëŒ€|modern|ì‚¬ë¬´ì‹¤|office|ì•„íŒŒíŠ¸|apartment|ë„ì‹œ|city|ìŠ¤ë§ˆíŠ¸í°|ì»´í“¨í„°|ë…¸íŠ¸ë¶/i.test(m),J=/ê³ ëŒ€|ancient|ê³ êµ¬ë ¤|ì‚¼êµ­|ì¡°ì„ |ê³ ë ¤|í•œë³µ|ì „í†µ/i.test(m);let v="",l="",x=!1;V?(v="modern contemporary Korean setting, current day Seoul, modern buildings, urban environment",l="modern Korean fashion, casual modern clothing",x=!1,console.log("[PanelEditor] Scene description requests modern setting - highest priority")):c?(v="ancient Korean historical setting, traditional architecture",l="traditional Korean hanbok",x=!0,console.log("[PanelEditor] Scene description requests ancient setting - highest priority")):G?(v="modern contemporary Korean setting, current day Seoul, modern buildings, urban environment",l="modern Korean fashion, casual modern clothing",x=!1,console.log("[PanelEditor] Feedback requests modern setting - overriding worldbuilding")):J?(v="ancient Korean historical setting, traditional architecture",l="traditional Korean hanbok",x=!0,console.log("[PanelEditor] Feedback requests ancient setting")):H.includes("ì² ê¸°")||H.includes("ê³ êµ¬ë ¤")||H.includes("ancient")||H.includes("ì‚¼êµ­")||z.includes("ì² ê¸°")||z.includes("ê³ êµ¬ë ¤")||z.includes("ì‚¼êµ­")?(v="ancient Korean Three Kingdoms period, traditional hanok architecture, wooden structures",l="ancient Korean hanbok, layered silk robes, traditional hair accessories",x=!0,console.log("[PanelEditor] Using worldbuilding era setting (ancient)")):H.includes("ì¡°ì„ ")||z.includes("ì¡°ì„ ")?(v="Joseon Dynasty Korea, traditional hanok, paper windows",l="Joseon era hanbok",x=!0,console.log("[PanelEditor] Using worldbuilding era setting (Joseon)")):H.includes("ê³ ë ¤")||z.includes("ê³ ë ¤")?(v="Goryeo Dynasty Korea, Buddhist temples, traditional architecture",l="Goryeo era traditional clothing",x=!0,console.log("[PanelEditor] Using worldbuilding era setting (Goryeo)")):(H.includes("í˜„ëŒ€")||H.includes("modern")||z.includes("í˜„ëŒ€"))&&(v="modern contemporary Korean setting, current day",l="modern Korean fashion",x=!1,console.log("[PanelEditor] Using worldbuilding era setting (modern)"));const M=x?`

CRITICAL ERA CONSISTENCY: This is a HISTORICAL setting. ABSOLUTELY NO modern elements allowed - no modern buildings, no electricity, no modern clothing, no glasses, no modern hairstyles. Everything must be period-accurate.`:"",E=s.characters.map(N=>{var T,U,be,ve,le,u,ce,ke,$e,Ce,de,me;const d=n.characters.find(Se=>Se.name===N.characterName||Se.koreanName===N.characterName);if(d){const Se=d.gender==="female"?"beautiful young Korean woman":d.gender==="male"?"handsome young Korean man":"Korean person",He=d.age||25,Ke=((T=d.appearance)==null?void 0:T.hairColor)||"black",ge=((U=d.appearance)==null?void 0:U.hairStyle)||"long",Be=((be=d.appearance)==null?void 0:be.eyeColor)||"dark brown",we=((ve=d.appearance)==null?void 0:ve.bodyType)||"slim",Re=((le=d.appearance)==null?void 0:le.height)||"",ts=((u=d.appearance)==null?void 0:u.skinTone)||"fair",as=((ce=d.appearance)==null?void 0:ce.faceShape)||"oval",ns=((ke=d.appearance)==null?void 0:ke.eyeShape)||"almond",Ye=((Ce=($e=d.appearance)==null?void 0:$e.distinguishingFeatures)==null?void 0:Ce.join(", "))||"",qe=((de=d.appearance)==null?void 0:de.defaultOutfit)||"",Ue=qe||l||(x?"traditional Korean hanbok":"modern Korean clothing"),is=d.role==="protagonist"?`elegant ${Ue}, high quality fabric`:d.role==="antagonist"?`imposing ${Ue}, dark tones`:Ue,os=(((me=d.appearance)==null?void 0:me.distinguishingFeatures)||[]).some(rs=>/ì•ˆê²½|glasses/i.test(rs))?", MUST BE WEARING GLASSES":"";let Ie="";return/ë¬¶|ponytail|bun|tied|updo|ì˜¬ë¦°/i.test(ge)?Ie=" (HAIR TIED UP/PONYTAIL - NOT loose)":/ë‹¨ë°œ|short|bob|ìˆ/i.test(ge)?Ie=" (SHORT HAIR - above shoulders)":/ííŠ¸ëŸ¬|messy|disheveled|unkempt|í—í´/i.test(ge)?Ie=" (MESSY/DISHEVELED hair)":/ê¸´|long|ë¡±/i.test(ge)&&(Ie=" (LONG flowing hair)"),`[CHARACTER: ${d.name}] ${Se}, exactly ${He} years old, MUST have ${Ke} ${ge} hair${Ie}, ${Be} ${ns} eyes${os}, ${ts} skin, ${as} face, ${we} body${Re?`, ${Re}`:""}, wearing ${is}${Ye?`. Distinctive features: ${Ye}`:""}. CRITICAL: Keep this character's face, hairstyle, and accessories (especially glasses) EXACTLY consistent with reference image provided.`}return x?"Korean person in traditional hanbok, period-accurate clothing":"Korean person in modern clothing"}).join(`
`),$=((Ee=(ne=s.dialogues)==null?void 0:ne[0])==null?void 0:Ee.text)||"",A=s.mood||"peaceful",I=s.lighting||"natural",K=s.size||"medium",B=s.cameraAngle||"medium-shot",X={natural:"bright natural daylight, clear illumination",sunset:"warm golden hour lighting, orange and pink tones",night:"dark nighttime atmosphere with moonlight, blue shadows",indoor:"soft indoor artificial lighting, warm ambient",dramatic:"high contrast dramatic lighting, deep shadows, strong highlights",soft:"soft diffused lighting, gentle shadows",backlight:"strong backlight creating silhouette effect, rim lighting",neon:"colorful neon glow, cyberpunk atmosphere"},se={happy:"bright cheerful atmosphere, warm colors",sad:"melancholic mood, muted colors, somber tone",angry:"intense aggressive mood, sharp contrasts",romantic:"soft romantic atmosphere, warm pink tones",tense:"suspenseful tension, dramatic shadows",mysterious:"enigmatic mysterious mood, dark atmosphere",comedic:"light humorous tone, exaggerated expressions",peaceful:"calm serene atmosphere, gentle lighting",dramatic:"intense dramatic mood, high contrast",nostalgic:"warm nostalgic feeling, sepia tones"},fe={"close-up":"close-up shot focusing on face and expression","extreme-close-up":"extreme close-up on eyes or specific detail","medium-shot":"medium shot showing upper body","wide-shot":"wide establishing shot showing full scene with background","bird-eye":"bird's eye view from above looking down","worm-eye":"low angle worm's eye view looking up","dutch-angle":"tilted dutch angle creating unease","over-shoulder":"over the shoulder perspective",pov:"first person point of view"},Z=X[I]||"natural lighting",te=se[A]||"neutral atmosphere",ye=fe[B]||"medium shot",Y=m?`

**CRITICAL USER FEEDBACK (MUST APPLY)**: ${m}
This feedback overrides any conflicting settings above.`:"",re=`Webtoon illustration, Korean manhwa style, clean detailed lineart, cel-shading, professional quality.

SCENE DESCRIPTION:
${oe}

VISUAL STYLE:
- Panel type: ${K} panel
- Camera: ${ye}
- Lighting: ${Z}
- Mood/Atmosphere: ${te}

${E?`CHARACTERS IN SCENE:
${E}`:""}

${v?`SETTING/ERA: ${v}`:""}
${l?`COSTUME STYLE: ${l}`:""}
${M}
${xe}
${Y}

IMPORTANT: Maintain visual consistency with character appearances. Use ${ye} composition. Create ${te} with ${Z}.`;console.log("[PanelEditor] Generated prompt:",re);const F=[];for(const N of s.characters){const d=n.characters.find(T=>T.name===N.characterName||T.koreanName===N.characterName);if(d){const T=((Pe=d.referenceImages)==null?void 0:Pe.filter(u=>u.type==="anchor"))||[];for(const u of T.slice(0,2))F.push(u.imageData);const U=((Te=d.expressions)==null?void 0:Te.filter(u=>u.imageData))||[];for(const u of U.slice(0,1))u.imageData&&F.push(u.imageData);const be=((Ne=d.poses)==null?void 0:Ne.filter(u=>u.imageData))||[];for(const u of be.slice(0,1))u.imageData&&F.push(u.imageData);const ve=((Ae=d.outfits)==null?void 0:Ae.filter(u=>u.imageData))||[];for(const u of ve.slice(0,1))u.imageData&&F.push(u.imageData);const le=((Le=d.referenceImages)==null?void 0:Le.filter(u=>u.type!=="anchor"))||[];for(const u of le.slice(0,1))F.push(u.imageData)}}if((ie=n.worldBuilding)!=null&&ie.mainLocations){const N=((pe=(ue=s.background)==null?void 0:ue.description)==null?void 0:pe.toLowerCase())||"";for(const d of n.worldBuilding.mainLocations)if(N.includes(d.name.toLowerCase())){for(const T of d.variations||[])if(T.generatedImage){F.push(T.generatedImage);break}}}if(k&&W>0){const N=Math.max(0,W-5),d=k.panels.slice(N,W);for(let T=d.length-1;T>=0;T--){const U=d[T];(De=U.generatedImage)!=null&&De.imageData&&F.length<12&&F.push(U.generatedImage.imageData)}}const ss=F.slice(0,14),Me=await Fe.generateImage(re,{resolution:i,styleAnchor:"",referenceImages:ss,useCache:!1});let Oe=Me.imageData;if($)try{const N=(a=(ze=s.dialogues)==null?void 0:ze[0])==null?void 0:a.bubbleStyle,d=N==="thought"||N==="shout"?N:"normal";Oe=await gs(Me.imageData,{text:$,position:((j=(w=s.dialogues)==null?void 0:w[0])==null?void 0:j.position)||{x:50,y:15},fontSize:28,bubbleStyle:d})}catch(N){console.error("Speech bubble rendering failed:",N)}i==="preview"?h(Oe):(t({generatedImage:{id:Date.now().toString(),resolution:i,imageData:Oe,promptUsed:re,generatedAt:new Date,fromCache:Me.fromCache,cost:Me.cost},status:"approved"}),h(null)),f({message:i==="preview"?"í”„ë¦¬ë·°ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤":"ê³ í•´ìƒë„ ì´ë¯¸ì§€ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤",type:"success"})}catch(k){console.error("Image generation failed:",k),f({message:"ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",type:"error"})}finally{p(!1)}}},he=()=>{o&&(t({generatedImage:{id:Date.now().toString(),resolution:"preview",imageData:o,promptUsed:s.visualPrompt,generatedAt:new Date,fromCache:!1,cost:.001},status:"approved"}),h(null))},Q=((b=(O=s.dialogues)==null?void 0:O[0])==null?void 0:b.text)||"",je={"close-up":"í´ë¡œì¦ˆì—…","extreme-close-up":"ìµìŠ¤íŠ¸ë¦¼","medium-shot":"ë¯¸ë””ì—„","wide-shot":"ì™€ì´ë“œ","bird-eye":"ë²„ë“œì•„ì´","worm-eye":"ì›œì•„ì´","dutch-angle":"ë”ì¹˜","over-shoulder":"ì˜¤ë²„ìˆ„ë”",pov:"POV"},L={happy:"ë°ìŒ",sad:"ìŠ¬í””",angry:"ë¶„ë…¸",romantic:"ë¡œë§¨í‹±",tense:"ê¸´ìž¥",mysterious:"ë¯¸ìŠ¤í„°ë¦¬",comedic:"ì½”ë¯¹",peaceful:"í‰í™”",dramatic:"ê·¹ì ",nostalgic:"í–¥ìˆ˜"},R={natural:"ìžì—°ê´‘",sunset:"ì„ì–‘",night:"ì•¼ê°„",indoor:"ì‹¤ë‚´",dramatic:"ê·¹ì ",soft:"ì†Œí”„íŠ¸",backlight:"ì—­ê´‘",neon:"ë„¤ì˜¨"};return e.jsxs("div",{className:"bg-gray-800/50 rounded-xl border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xl font-bold text-purple-400",children:["#",s.panelNumber]}),((ae=(ee=s.characters)==null?void 0:ee[0])==null?void 0:ae.characterName)&&e.jsx("span",{className:"text-sm text-gray-300",children:s.characters[0].characterName}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-500/20 text-blue-400 text-xs rounded-full",children:je[s.cameraAngle]||s.cameraAngle}),s.mood&&e.jsx("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-400 text-xs rounded-full",children:L[s.mood]||s.mood}),s.lighting&&e.jsx("span",{className:"px-2 py-0.5 bg-yellow-500/20 text-yellow-400 text-xs rounded-full",children:R[s.lighting]||s.lighting})]})]}),e.jsx(Ve,{options:us,value:s.size,onChange:i=>t({size:i}),placeholder:"í¬ê¸°"})]}),e.jsxs("div",{className:"p-4",children:[Q&&e.jsxs("div",{className:"mb-4 p-3 bg-white/10 rounded-lg border-l-4 border-purple-500",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"ðŸ’¬ ëŒ€ì‚¬"}),e.jsxs("p",{className:"text-white text-lg font-medium",children:['"',Q,'"']})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{className:"col-span-2",children:e.jsx("div",{className:"aspect-[4/3] bg-gray-900 rounded-lg overflow-hidden relative",children:e.jsx(ls,{mode:"wait",children:r?e.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_e,{size:"lg",className:"mx-auto mb-2"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"ì´ë¯¸ì§€ ìƒì„± ì¤‘..."})]})},"loading"):o?e.jsx(q.img,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},src:o,alt:"Preview",className:"w-full h-full object-contain bg-gray-950"},"preview"):s.generatedImage?e.jsx(q.img,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},src:s.generatedImage.imageData,alt:`Panel ${s.panelNumber}`,className:"w-full h-full object-contain bg-gray-950"},"generated"):e.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-5xl mb-3 block",children:"ðŸŽ¨"}),e.jsx("p",{className:"text-gray-400",children:"ì´ë¯¸ì§€ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”"})]})},"empty")})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ve,{label:"ì•µê¸€",options:ps,value:s.cameraAngle,onChange:i=>t({cameraAngle:i})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"ìž¥ë©´ ì„¤ëª…"}),e.jsx("textarea",{value:s.composition,onChange:i=>t({composition:i.target.value}),rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm resize-none",placeholder:"ìž¥ë©´ ì„¤ëª…..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"ëŒ€ì‚¬ ìˆ˜ì •"}),e.jsx("textarea",{value:Q,onChange:i=>{var ne;const S=(ne=s.dialogues)!=null&&ne.length?[{...s.dialogues[0],text:i.target.value}]:[{id:`dlg-${Date.now()}`,text:i.target.value,type:"speech",bubbleStyle:"normal",position:{x:50,y:20},size:{width:200,height:80},fontSize:"medium"}];t({dialogues:S})},rows:2,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm resize-none",placeholder:"ìºë¦­í„° ëŒ€ì‚¬..."})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-700/50 rounded-lg",children:[e.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"âœï¸ ê·¸ë¦¼ ë³´ì™„ì  (ìž¬ìƒì„± ì‹œ ë°˜ì˜)"}),e.jsx("textarea",{value:m,onChange:i=>C(i.target.value),rows:2,className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm resize-none mb-3",placeholder:"ì˜ˆ: í‘œì •ì„ ë” ë°ê²Œ, ë°°ê²½ì„ ì–´ë‘¡ê²Œ, ì•µê¸€ì„ í´ë¡œì¦ˆì—…ìœ¼ë¡œ... (ëŒ€ì‚¬ëŠ” ìœ„ 'ëŒ€ì‚¬ ìˆ˜ì •'ì— ìž…ë ¥)"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(P,{variant:"primary",onClick:()=>y("preview"),disabled:r,loading:r,children:s.generatedImage||o?"ðŸ”„ ìž¬ìƒì„±":"ðŸŽ¨ ì´ë¯¸ì§€ ìƒì„±"}),o&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"primary",onClick:he,size:"sm",children:"âœ“ ìŠ¹ì¸"}),e.jsx(P,{variant:"secondary",onClick:()=>h(null),size:"sm",children:"ì·¨ì†Œ"})]})]})]})]})]})},fs=({panels:s,selectedPanelId:g,onSelectPanel:t,onDeletePanel:r,onDeleteAllPanels:p})=>e.jsxs("div",{className:"bg-gray-800/50 rounded-xl border border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"íƒ€ìž„ë¼ì¸"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:[s.length," íŒ¨ë„"]}),s.length>0&&p&&e.jsx("button",{onClick:()=>{confirm("ëª¨ë“  íŒ¨ë„ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&p()},className:"text-xs text-red-400 hover:text-red-300 px-2 py-1 rounded bg-red-500/10 hover:bg-red-500/20",children:"ì „ì²´ ì‚­ì œ"})]})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[s.map(o=>e.jsxs(q.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(o.id),className:`
              group relative flex-shrink-0 w-20 h-28 rounded-lg overflow-hidden border-2 transition-all
              ${g===o.id?"border-purple-500 ring-2 ring-purple-500/30":"border-gray-700 hover:border-gray-600"}
            `,children:[o.generatedImage?e.jsx("img",{src:o.generatedImage.imageData,alt:`Panel ${o.panelNumber}`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-900 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 text-2xl",children:"ðŸŽ¨"})}),e.jsx("div",{className:"absolute top-1 left-1 w-5 h-5 rounded bg-black/60 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:o.panelNumber})}),r&&e.jsx("div",{onClick:h=>{h.stopPropagation(),confirm(`íŒ¨ë„ ${o.panelNumber}ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)&&r(o.id)},className:"absolute top-1 right-1 w-5 h-5 rounded bg-red-500/80 hover:bg-red-500 flex items-center justify-center cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"text-white text-xs",children:"âœ•"})}),e.jsx("div",{className:`absolute bottom-1 right-1 w-2 h-2 rounded-full ${o.status==="approved"?"bg-green-500":o.status==="preview"?"bg-yellow-500":"bg-gray-500"}`}),g===o.id&&e.jsx(q.div,{layoutId:"selectedPanel",className:"absolute inset-0 border-2 border-purple-500 rounded-lg"})]},o.id)),e.jsx("button",{className:"flex-shrink-0 w-20 h-28 rounded-lg border-2 border-dashed border-gray-700 hover:border-gray-600 flex items-center justify-center transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}),ys=({projectTitle:s,episodeTitle:g,onSave:t,onPreview:r,onExport:p})=>{const{viewMode:o,setViewMode:h,zoom:m,setZoom:C}=We(),n=[{id:"edit",label:"íŽ¸ì§‘"},{id:"preview",label:"ë¯¸ë¦¬ë³´ê¸°"},{id:"split",label:"ë¶„í• "}];return e.jsx("div",{className:"bg-gray-800/80 backdrop-blur-sm border-b border-gray-700 px-4 py-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-white font-bold",children:s}),e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsx("span",{className:"text-gray-300",children:g})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Qe,{tabs:n,activeTab:o,onChange:f=>h(f),variant:"pills",size:"sm"}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-gray-700 rounded-lg",children:[e.jsx("button",{onClick:()=>C(m-10),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsxs("span",{className:"text-white text-sm w-12 text-center",children:[m,"%"]}),e.jsx("button",{onClick:()=>C(m+10),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{variant:"ghost",size:"sm",onClick:t,children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"ì €ìž¥"]}),e.jsxs(P,{variant:"ghost",size:"sm",onClick:r,children:[e.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"ë¯¸ë¦¬ë³´ê¸°"]}),e.jsxs(P,{variant:"primary",size:"sm",onClick:p,children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"ë‚´ë³´ë‚´ê¸°"]})]})]})})};async function bs(s){const t=[...s].sort((n,f)=>n.panelNumber-f.panelNumber).filter(n=>{var f;return(f=n.generatedImage)==null?void 0:f.imageData});if(t.length===0)throw new Error("ë‚´ë³´ë‚¼ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.");const r=await Promise.all(t.map(n=>vs(n.generatedImage.imageData))),p=Math.max(...r.map(n=>n.width)),o=r.reduce((n,f)=>n+f.height,0),h=document.createElement("canvas"),m=h.getContext("2d");if(!m)throw new Error("Canvas context not available");h.width=p,h.height=o,m.fillStyle="#ffffff",m.fillRect(0,0,h.width,h.height);let C=0;for(const n of r){const f=(p-n.width)/2;m.drawImage(n,f,C),C+=n.height}return h.toDataURL("image/png")}function vs(s){return new Promise((g,t)=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>g(r),r.onerror=()=>t(new Error("Failed to load image")),r.src=s})}function es(s,g){const t=document.createElement("a");t.href=s,t.download=g,document.body.appendChild(t),t.click(),document.body.removeChild(t)}async function ws(s){const g=await bs(s.panels),t=`${s.episodeNumber}í™”_${s.title||"episode"}.png`;es(g,t)}function js(s,g){var r;if(!((r=s.generatedImage)!=null&&r.imageData))throw new Error("ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.");const t=`${g}í™”_íŒ¨ë„${s.panelNumber}.png`;es(s.generatedImage.imageData,t)}async function Xe(s){const t=[...s.panels].sort((r,p)=>r.panelNumber-p.panelNumber).filter(r=>{var p;return(p=r.generatedImage)==null?void 0:p.imageData});for(const r of t)js(r,s.episodeNumber),await new Promise(p=>setTimeout(p,300))}async function Ns(s,g){const{format:t}=g;switch(t){case"long-image":await ws(s);break;case"individual":await Xe(s);break;case"zip":await Xe(s);break;default:throw new Error("ì§€ì›í•˜ì§€ ì•ŠëŠ” ë‚´ë³´ë‚´ê¸° í˜•ì‹ìž…ë‹ˆë‹¤.")}}const Ds=()=>{const{projectId:s}=cs(),g=ds(),{currentProject:t,setCurrentProject:r,updatePanel:p,addPanel:o,deletePanel:h}=Ze(),{selectedEpisodeId:m,setSelectedEpisode:C,selectedPanelId:n,setSelectedPanel:f,addToast:y}=We(),{user:he}=ms(),[Q,je]=_.useState(!0),[L,R]=_.useState(!1),[O,b]=_.useState(!1),[ee,ae]=_.useState([]);_.useEffect(()=>{(async()=>{s&&(await r(s),je(!1))})()},[s,r]),_.useEffect(()=>{t!=null&&t.episodes.length&&!m&&C(t.episodes[0].id)},[t,m,C]);const i=t==null?void 0:t.episodes.find(a=>a.id===m),S=i==null?void 0:i.panels.find(a=>a.id===n),ne=async(a,w)=>{m&&(await p(m,a,w),y({message:"íŒ¨ë„ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤",type:"success"}))},Ee=async()=>{var a,w;if(!(!i||!t)){R(!0),y({message:"íŒ¨ë„ì„ ìƒì„±í•˜ê³  ìžˆìŠµë‹ˆë‹¤...",type:"info"});try{const j=t.worldBuilding,k=(j==null?void 0:j.era)||"ê³ ëŒ€ í•œêµ­",W=(j==null?void 0:j.setting)||"ì—­ì‚¬ë¬¼",xe=t.characters.map(c=>{var E,$,A,I,K,B;const G=c.gender==="female"?"woman":c.gender==="male"?"man":"person",J=((E=c.appearance)==null?void 0:E.hairColor)||"black",v=(($=c.appearance)==null?void 0:$.hairStyle)||"long",l=((A=c.appearance)==null?void 0:A.eyeColor)||"dark brown",x=((I=c.appearance)==null?void 0:I.defaultOutfit)||"",M=((B=(K=c.appearance)==null?void 0:K.distinguishingFeatures)==null?void 0:B.join(", "))||"";return`${c.name}: ${G}, ${J} ${v} hair, ${l} eyes${x?`, wearing ${x}`:""}${M?`, features: ${M}`:""}`}).join(`
`),oe=((a=j==null?void 0:j.mainLocations)==null?void 0:a.map(c=>`${c.name}: ${c.description||""}`).join(`
`))||"",D=70,H=`ì›¹íˆ° ${i.episodeNumber}í™” íŒ¨ë„ ${D}ê°œ ìƒì„±. JSON ì¶œë ¥.

ìŠ¤í† ë¦¬: ${i.summary}
ë°°ê²½: ${k}, ${W}
ì£¼ìš” ì´ë²¤íŠ¸: ${((w=i.keyEvents)==null?void 0:w.join(", "))||""}

ìºë¦­í„°:
${xe}

ìž¥ì†Œ:
${oe}

âš ï¸âš ï¸âš ï¸ ë§¤ìš° ì¤‘ìš” - ë°˜ë“œì‹œ ì´ í˜•ì‹ìœ¼ë¡œ ì¶œë ¥ âš ï¸âš ï¸âš ï¸

{"panels":[
{"n":1,"size":"full","camera":"wide-shot","mood":"mysterious","lighting":"night","img":"[LOCATION: ì–´ë‘ìš´ ì‚¬ë¬´ì‹¤, ëª¨ë‹ˆí„° ë¶ˆë¹›ë§Œ ë¹„ì¹¨] [CHARACTER: í•˜ëŠ˜, 20ëŒ€ ì—¬ì„±, ê²€ì€ ê¸´ ë¨¸ë¦¬ ííŠ¸ëŸ¬ì§, ë‹¤í¬ì„œí´, í›„ë“œí‹°] [ATMOSPHERE: ìƒˆë²½ 3ì‹œ, ì°¨ê°€ìš´ ëª¨ë‹ˆí„° ë¹›]","dialog":""},
{"n":2,"size":"small","camera":"extreme-close-up","mood":"tense","lighting":"dramatic","img":"[FOCUS: ë””ì§€í„¸ ì‹œê³„ 03:42 AM]","dialog":""},
{"n":3,"size":"medium","camera":"medium-shot","mood":"sad","lighting":"indoor","img":"[CHARACTER: í•˜ëŠ˜, ì§€ì¹œ í‘œì •ìœ¼ë¡œ í‚¤ë³´ë“œ íƒ€ì´í•‘]","dialog":"ì  ìž¥..."}
]}

ðŸ“Œ ê° íŒ¨ë„ì— ë°˜ë“œì‹œ í¬í•¨í•  6ê°œ í•„ë“œ:
- "n": íŒ¨ë„ ë²ˆí˜¸ (1-${D})
- "size": full/large/medium/small/wide ì¤‘ í•˜ë‚˜
- "camera": close-up/extreme-close-up/medium-shot/wide-shot/bird-eye/worm-eye/dutch-angle/over-shoulder ì¤‘ í•˜ë‚˜
- "mood": happy/sad/angry/romantic/tense/mysterious/comedic/peaceful/dramatic/nostalgic ì¤‘ í•˜ë‚˜
- "lighting": natural/sunset/night/indoor/dramatic/soft/backlight/neon ì¤‘ í•˜ë‚˜
- "img": ì˜ì–´ë¡œ ìƒì„¸í•œ ìž¥ë©´ ì„¤ëª…
- "dialog": í•œêµ­ì–´ ëŒ€ì‚¬ ë˜ëŠ” ""

ðŸ“Š ë‹¤ì–‘í•˜ê²Œ ì‚¬ìš©í•´ì•¼ í•  ë¹„ìœ¨:
- size: full 10ê°œ, large 15ê°œ, medium 30ê°œ, small 15ê°œ
- camera: ë‹¤ì–‘í•œ ì•µê¸€ì„ ì”¬ì— ë§žê²Œ ì‚¬ìš©
- mood: ìž¥ë©´ ê°ì •ì— ë§žê²Œ ë³€ê²½
- lighting: ì‹œê°„ëŒ€ì™€ ë¶„ìœ„ê¸°ì— ë§žê²Œ ë³€ê²½

ðŸŽ¨ img í•„ë“œ ìž‘ì„±ë²• (ì˜ì–´ë¡œ):
[LOCATION: ìž¥ì†Œ ìƒì„¸ - ê±´ë¬¼, ê°€êµ¬, ì†Œí’ˆ]
[CHARACTER: ì´ë¦„, ì„±ë³„, ë‚˜ì´, ë¨¸ë¦¬ìƒ‰+ìŠ¤íƒ€ì¼, ëˆˆìƒ‰, í‘œì •, í¬ì¦ˆ, ì˜ìƒ ìƒì„¸]
[ATMOSPHERE: ì¡°ëª… ë°©í–¥, ê·¸ë¦¼ìž, ë‚ ì”¨]

ê·œì¹™:
1. ì •í™•ížˆ ${D}ê°œ íŒ¨ë„ ìƒì„± (1-${D})
2. ëª¨ë“  íŒ¨ë„ì— size, camera, mood, lighting í•„ë“œ í•„ìˆ˜!
3. imgëŠ” ì˜ì–´ë¡œë§Œ, dialogëŠ” í•œêµ­ì–´ë¡œë§Œ
4. ëŒ€ì‚¬ ì—†ëŠ” ìž¥ë©´ì€ dialogë¥¼ "" ë¡œ
5. JSONë§Œ ì¶œë ¥, { ë¡œ ì‹œìž‘`,z=await Fe.generateText(H,{temperature:.8,maxTokens:32e3,useCache:!1});console.log("[AI Response Raw]:",z);const V=Je(z);if(console.log("[Parsed Result]:",JSON.stringify(V,null,2)),!V.panels||V.panels.length===0)throw new Error("íŒ¨ë„ì´ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");for(const c of V.panels){console.log("[Panel Data]:",JSON.stringify(c,null,2));const G=c.n||c.panelNumber||1,J=c.img||c.sceneDescription||"";let v=c.dialog??c.dialogue??c.talk??c.speech??c.text??"";console.log(`[Panel ${G}] Dialog field:`,c.dialog,"| Dialogue field:",c.dialogue,"| Final:",v);const x=!/[ê°€-íž£]/.test(v)&&/^[a-zA-Z\s,.\-'":;!?]+$/.test(v);v&&x&&(console.log(`[Panel ${G}] Filtered out English description:`,v),v="");const M=c.who||c.character||"",E=c.size||"medium",$=c.camera||"medium-shot",A=c.mood||"peaceful",I=c.lighting||"natural";console.log(`[Panel ${G}] AI Values - size: ${c.size}, camera: ${c.camera}, mood: ${c.mood}, lighting: ${c.lighting}`);const K=["full","large","medium","small","wide","tall"],B=["close-up","medium-shot","wide-shot","extreme-close-up","bird-eye","worm-eye","dutch-angle","over-shoulder","pov"],X=["happy","sad","angry","romantic","tense","mysterious","comedic","peaceful","dramatic","nostalgic"],se=["natural","sunset","night","indoor","dramatic","soft","backlight","neon"],fe=K.includes(E)?E:"medium",Z=B.includes($)?$:"medium-shot",te=X.includes(A)?A:"peaceful",ye=se.includes(I)?I:"natural";let Y="afternoon";I==="night"?Y="night":I==="sunset"?Y="evening":I==="soft"&&(Y="morning");const re={episodeId:i.id,panelNumber:G,size:fe,cameraAngle:Z,composition:J,characters:M?[{characterId:"",characterName:M,position:{x:50,y:50},scale:1,expression:"neutral",pose:"standing",action:"",facing:"front",layer:1}]:[],background:{locationName:"",description:J,timeOfDay:Y,weather:"",mood:te,focusPoint:"",depth:fe==="wide"||Z==="wide-shot"?"deep":Z==="close-up"||Z==="extreme-close-up"?"shallow":"medium"},dialogues:v?[{id:`dlg-${Date.now()}-${G}`,text:v,type:"speech",bubbleStyle:"normal",position:{x:50,y:20},size:{width:200,height:80},fontSize:"medium"}]:[],sfx:[],mood:te,lighting:ye,visualPrompt:J,status:"pending"};await o(i.id,re)}await r(s),y({message:`${V.panels.length}ê°œ íŒ¨ë„ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!`,type:"success"})}catch(j){console.error("Panel generation failed:",j),y({message:"íŒ¨ë„ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",type:"error"})}finally{R(!1)}}},Pe=async a=>{m&&(await h(m,a),f(null),y({message:"íŒ¨ë„ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤",type:"success"}))},Te=async()=>{if(i){for(const a of i.panels)await h(i.id,a.id);f(null),y({message:"ëª¨ë“  íŒ¨ë„ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤",type:"success"})}},Ne=()=>{if(!i)return[];const a=70,w=new Set(i.panels.map(k=>k.panelNumber)),j=[];for(let k=1;k<=a;k++)w.has(k)||j.push(k);return j},Ae=()=>{const a=Ne();a.length>0?(ae(a),b(!0)):y({message:"ë¹ ì§„ íŒ¨ë„ì´ ì—†ìŠµë‹ˆë‹¤!",type:"success"})},Le=async a=>{if(!(!i||!t||a.length===0)){R(!0),b(!1),y({message:`${a.length}ê°œ ë¹ ì§„ íŒ¨ë„ì„ ìƒì„±í•˜ê³  ìžˆìŠµë‹ˆë‹¤...`,type:"info"});try{const w=t.worldBuilding,j=(w==null?void 0:w.era)||"ê³ ëŒ€ í•œêµ­",k=(w==null?void 0:w.setting)||"ì—­ì‚¬ë¬¼",W=t.characters.map(l=>{var I,K,B,X;const x=l.gender==="female"?"woman":l.gender==="male"?"man":"person",M=((I=l.appearance)==null?void 0:I.hairColor)||"black",E=((K=l.appearance)==null?void 0:K.hairStyle)||"long",$=((B=l.appearance)==null?void 0:B.eyeColor)||"dark brown",A=((X=l.appearance)==null?void 0:X.defaultOutfit)||"";return`${l.name}: ${x}, ${M} ${E} hair, ${$} eyes${A?`, wearing ${A}`:""}`}).join(`
`),xe=l=>{var $,A;const x=i.panels.find(I=>I.panelNumber===l-1),M=i.panels.find(I=>I.panelNumber===l+1);let E="";return x&&(E+=`Previous panel ${l-1}: ${(($=x.composition)==null?void 0:$.slice(0,100))||"no description"}
`),M&&(E+=`Next panel ${l+1}: ${((A=M.composition)==null?void 0:A.slice(0,100))||"no description"}
`),E},oe=a.map(l=>`Panel ${l} context:
${xe(l)}`).join(`

`),D=`ë¹ ì§„ íŒ¨ë„ë§Œ ìƒì„±. JSON ì¶œë ¥.

ìŠ¤í† ë¦¬: ${i.summary}
ë°°ê²½: ${j}, ${k}

ìºë¦­í„°:
${W}

ìƒì„±í•  íŒ¨ë„ ë²ˆí˜¸: ${a.join(", ")}

ì•žë’¤ ë¬¸ë§¥:
${oe}

âš ï¸âš ï¸âš ï¸ ë°˜ë“œì‹œ ì´ í˜•ì‹ìœ¼ë¡œ ì¶œë ¥ âš ï¸âš ï¸âš ï¸

{"panels":[
{"n":${a[0]},"size":"medium","camera":"close-up","mood":"tense","lighting":"dramatic","img":"[LOCATION: ìž¥ì†Œ] [CHARACTER: ì´ë¦„, ë¨¸ë¦¬ìƒ‰, í‘œì •, ì˜ìƒ] [ATMOSPHERE: ì¡°ëª…]","dialog":"í•œêµ­ì–´ ëŒ€ì‚¬"}
]}

ðŸ“Œ ê° íŒ¨ë„ì— ë°˜ë“œì‹œ í¬í•¨í•  6ê°œ í•„ë“œ:
- "n": íŒ¨ë„ ë²ˆí˜¸
- "size": full/large/medium/small/wide ì¤‘ í•˜ë‚˜
- "camera": close-up/extreme-close-up/medium-shot/wide-shot/bird-eye/worm-eye/dutch-angle/over-shoulder ì¤‘ í•˜ë‚˜
- "mood": happy/sad/angry/romantic/tense/mysterious/comedic/peaceful/dramatic/nostalgic ì¤‘ í•˜ë‚˜
- "lighting": natural/sunset/night/indoor/dramatic/soft/backlight/neon ì¤‘ í•˜ë‚˜
- "img": ì˜ì–´ë¡œ ìž¥ë©´ ì„¤ëª…
- "dialog": í•œêµ­ì–´ ëŒ€ì‚¬ ë˜ëŠ” ""

ê·œì¹™:
1. ì •í™•ížˆ ${a.join(", ")} ë²ˆ íŒ¨ë„ë§Œ ìƒì„± (${a.length}ê°œ)
2. ëª¨ë“  íŒ¨ë„ì— size, camera, mood, lighting í•„ë“œ í•„ìˆ˜!
3. ì•žë’¤ íŒ¨ë„ê³¼ ìžì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°
4. JSONë§Œ ì¶œë ¥`,H=await Fe.generateText(D,{temperature:.7,maxTokens:16e3,useCache:!1}),z=Je(H);if(!z.panels||z.panels.length===0)throw new Error("íŒ¨ë„ì´ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");const V=["full","large","medium","small","wide","tall"],c=["close-up","medium-shot","wide-shot","extreme-close-up","bird-eye","worm-eye","dutch-angle","over-shoulder","pov"],G=["happy","sad","angry","romantic","tense","mysterious","comedic","peaceful","dramatic","nostalgic"],J=["natural","sunset","night","indoor","dramatic","soft","backlight","neon"];let v=0;for(const l of z.panels){const x=l.n||l.panelNumber;if(!a.includes(x)){console.log(`[Missing Panel] Skipping panel ${x} - not in requested list`);continue}if(i.panels.some(F=>F.panelNumber===x)){console.log(`[Missing Panel] Panel ${x} already exists, skipping`);continue}const E=l.img||l.sceneDescription||"";let $=l.dialog??l.dialogue??"";const I=!/[ê°€-íž£]/.test($)&&/^[a-zA-Z\s,.\-'":;!?]+$/.test($);$&&I&&($="");const K=l.size||"medium",B=l.camera||"medium-shot",X=l.mood||"peaceful",se=l.lighting||"natural",fe=V.includes(K)?K:"medium",Z=c.includes(B)?B:"medium-shot",te=G.includes(X)?X:"peaceful",ye=J.includes(se)?se:"natural";let Y="afternoon";se==="night"?Y="night":se==="sunset"&&(Y="evening");const re={episodeId:i.id,panelNumber:x,size:fe,cameraAngle:Z,composition:E,characters:[],background:{locationName:"",description:E,timeOfDay:Y,weather:"",mood:te,focusPoint:"",depth:"medium"},dialogues:$?[{id:`dlg-${Date.now()}-${x}`,text:$,type:"speech",bubbleStyle:"normal",position:{x:50,y:20},size:{width:200,height:80},fontSize:"medium"}]:[],sfx:[],mood:te,lighting:ye,visualPrompt:E,status:"pending"};await o(i.id,re),v++}await r(s),y({message:`${v}ê°œ ë¹ ì§„ íŒ¨ë„ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!`,type:"success"})}catch(w){console.error("Missing panel generation failed:",w),y({message:"ë¹ ì§„ íŒ¨ë„ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",type:"error"})}finally{R(!1)}}};if(Q)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx(_e,{size:"lg"})});if(!t)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs(Ge,{className:"text-center p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"}),e.jsx(P,{variant:"primary",onClick:()=>g("/dashboard"),children:"ëŒ€ì‹œë³´ë“œë¡œ ì´ë™"})]})});const ie=(t==null?void 0:t.episodes.findIndex(a=>a.id===m))??-1,ue=ie>0,pe=ie<((t==null?void 0:t.episodes.length)??0)-1,De=()=>{if(ue&&t){const a=t.episodes[ie-1];C(a.id),a.panels.length>0?f(a.panels[0].id):f(null)}},ze=()=>{if(pe&&t){const a=t.episodes[ie+1];C(a.id),a.panels.length>0?f(a.panels[0].id):f(null)}};return e.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col",children:[e.jsxs("div",{className:"bg-gray-800 border-b border-gray-700 px-4 py-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(P,{variant:"ghost",size:"sm",onClick:()=>g(`/create/${s}`),className:"text-gray-400 hover:text-white",children:[e.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"í”„ë¡œì íŠ¸ ì„¤ì •"]}),e.jsx("div",{className:"text-gray-400",children:"|"}),e.jsx("h1",{className:"text-white font-bold",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:De,disabled:!ue,className:ue?"":"opacity-50 cursor-not-allowed",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"bg-gray-700 rounded-lg px-4 py-2 min-w-[200px] text-center",children:[e.jsx("span",{className:"text-purple-400 font-bold",children:i?`${i.episodeNumber}í™”`:"ì—í”¼ì†Œë“œ ì„ íƒ"}),i&&e.jsxs("span",{className:"text-gray-400 ml-2 text-sm",children:["/ ",t.episodes.length,"í™”"]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:ze,disabled:!pe,className:pe?"":"opacity-50 cursor-not-allowed",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("div",{className:"flex items-center gap-2",children:he?e.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})}),e.jsx("span",{children:"ìžë™ ë™ê¸°í™” ì¤‘"})]}):e.jsxs("button",{onClick:()=>g("/settings"),className:"flex items-center gap-2 text-gray-400 hover:text-white text-sm transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})}),e.jsx("span",{children:"ë¡œê·¸ì¸í•˜ì—¬ ë™ê¸°í™”"})]})})]}),e.jsx(ys,{projectTitle:t.title,episodeTitle:(i==null?void 0:i.title)||"ì—í”¼ì†Œë“œ ì„ íƒ",onSave:()=>y({message:"ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤ (ìžë™ ì €ìž¥ë¨)",type:"success"}),onPreview:()=>g(`/preview/${s}`),onExport:async()=>{if(!i){y({message:"ì—í”¼ì†Œë“œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”",type:"error"});return}if(i.panels.filter(w=>{var j;return(j=w.generatedImage)==null?void 0:j.imageData}).length===0){y({message:"ë‚´ë³´ë‚¼ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤",type:"error"});return}try{y({message:"ì´ë¯¸ì§€ë¥¼ ë³‘í•©í•˜ê³  ìžˆìŠµë‹ˆë‹¤...",type:"info"}),await Ns(i,{format:"long-image"}),y({message:"ë‚´ë³´ë‚´ê¸° ì™„ë£Œ!",type:"success"})}catch(w){console.error("Export failed:",w),y({message:"ë‚´ë³´ë‚´ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",type:"error"})}}}),e.jsxs("div",{className:"flex-1 flex",children:[e.jsxs("div",{className:"w-64 bg-gray-800/50 border-r border-gray-700 p-4 overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"ì—í”¼ì†Œë“œ"}),e.jsx("div",{className:"space-y-2",children:t.episodes.length>0?t.episodes.map(a=>e.jsxs(q.button,{whileHover:{x:4},onClick:()=>{C(a.id),a.panels.length>0&&f(a.panels[0].id)},className:`w-full text-left p-3 rounded-lg transition-colors ${m===a.id?"bg-purple-600/30 border border-purple-500":"bg-gray-700/50 hover:bg-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-white font-medium",children:[a.episodeNumber,"í™”"]}),e.jsxs("span",{className:"text-gray-400 text-sm",children:[a.panels.length," íŒ¨ë„"]})]}),e.jsx("p",{className:"text-gray-400 text-sm truncate mt-1",children:a.title})]},a.id)):e.jsxs("div",{className:"text-center text-gray-400 py-8",children:[e.jsx("p",{children:"ì—í”¼ì†Œë“œê°€ ì—†ìŠµë‹ˆë‹¤"}),e.jsx(P,{variant:"ghost",size:"sm",className:"mt-2",onClick:()=>{},children:"ì—í”¼ì†Œë“œ ì¶”ê°€"})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"ìºë¦­í„°"}),e.jsx("div",{className:"space-y-2",children:t.characters.map(a=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-gray-700/30",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-sm",children:a.gender==="female"?"ðŸ‘©":"ðŸ‘¨"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:a.name}),e.jsx("p",{className:"text-gray-400 text-xs",children:a.role})]})]},a.id))})]})]}),e.jsx("div",{className:"flex-1 flex flex-col p-4 overflow-hidden",children:i?e.jsxs(e.Fragment,{children:[e.jsx(fs,{panels:i.panels,selectedPanelId:n,onSelectPanel:f,onDeletePanel:Pe,onDeleteAllPanels:Te}),e.jsxs("div",{className:"flex-1 mt-4 overflow-y-auto",children:[S?e.jsx(xs,{panel:S,episodeId:i.id,onUpdate:a=>ne(S.id,a)}):e.jsx(Ge,{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:"ðŸŽ¬"}),e.jsx("p",{className:"text-gray-400 mb-2",children:i.panels.length===0?"ì´ ì—í”¼ì†Œë“œì— íŒ¨ë„ì´ ì—†ìŠµë‹ˆë‹¤":"íŒ¨ë„ì„ ì„ íƒí•˜ê±°ë‚˜ ìƒˆë¡œ ì¶”ê°€í•˜ì„¸ìš”"}),i.panels.length===0&&e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"AIê°€ ì—í”¼ì†Œë“œ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ íŒ¨ë„ì„ ìžë™ ìƒì„±í•©ë‹ˆë‹¤"}),e.jsx(P,{variant:"primary",className:"mt-4",onClick:Ee,disabled:L,loading:L,children:L?"AI íŒ¨ë„ ìƒì„± ì¤‘...":"AI íŒ¨ë„ ìžë™ ìƒì„±"})]})}),i.panels.length>0&&e.jsxs("div",{className:"mt-4 flex gap-2 justify-center",children:[e.jsx(P,{variant:"secondary",size:"sm",onClick:Ae,disabled:L,children:"ðŸ” ë¹ ì§„ íŒ¨ë„ í™•ì¸"}),e.jsxs(P,{variant:"secondary",size:"sm",onClick:()=>{const a=Ne();a.length>0?(ae(a),b(!0)):y({message:"ì´ë¯¸ 70ê°œ íŒ¨ë„ì´ ëª¨ë‘ ìžˆìŠµë‹ˆë‹¤!",type:"success"})},disabled:L,loading:L,children:["âž• íŒ¨ë„ ì¶”ê°€ ìƒì„± (",70-((i==null?void 0:i.panels.length)||0),"ê°œ ë‚¨ìŒ)"]})]})]})]}):e.jsx(Ge,{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:"ðŸ“š"}),e.jsx("p",{className:"text-gray-400",children:"ì—í”¼ì†Œë“œë¥¼ ì„ íƒí•˜ì„¸ìš”"})]})})}),e.jsxs("div",{className:"w-72 bg-gray-800/50 border-l border-gray-700 p-4 overflow-y-auto",children:[e.jsx(Qe,{tabs:[{id:"properties",label:"ì†ì„±"},{id:"dialogue",label:"ëŒ€ì‚¬"}],activeTab:"properties",onChange:()=>{},variant:"underline",fullWidth:!0}),e.jsx("div",{className:"mt-4",children:S?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"íŒ¨ë„ í¬ê¸°"}),e.jsx("p",{className:"text-white",children:{full:"ì „ì²´",large:"ëŒ€í˜•",medium:"ì¤‘í˜•",small:"ì†Œí˜•",wide:"ê°€ë¡œí˜•",tall:"ì„¸ë¡œí˜•",custom:"ì»¤ìŠ¤í…€"}[S.size]||S.size})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ì¹´ë©”ë¼ ì•µê¸€"}),e.jsx("p",{className:"text-white",children:{"close-up":"í´ë¡œì¦ˆì—…","extreme-close-up":"ìµìŠ¤íŠ¸ë¦¼ í´ë¡œì¦ˆì—…","medium-shot":"ë¯¸ë””ì—„ìƒ·","wide-shot":"ì™€ì´ë“œìƒ·","bird-eye":"ë²„ë“œì•„ì´","worm-eye":"ì›œì•„ì´","dutch-angle":"ë”ì¹˜ì•µê¸€","over-shoulder":"ì˜¤ë²„ìˆ„ë”",pov:"POV"}[S.cameraAngle]||S.cameraAngle})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ë¶„ìœ„ê¸°"}),e.jsx("p",{className:"text-white",children:{happy:"ë°ìŒ ðŸ˜Š",sad:"ìŠ¬í”” ðŸ˜¢",angry:"ë¶„ë…¸ ðŸ˜ ",romantic:"ë¡œë§¨í‹± ðŸ’•",tense:"ê¸´ìž¥ ðŸ˜°",mysterious:"ë¯¸ìŠ¤í„°ë¦¬ ðŸ”®",comedic:"ì½”ë¯¹ ðŸ˜‚",peaceful:"í‰í™” ðŸŒ¿",dramatic:"ê·¹ì  ðŸŽ­",nostalgic:"í–¥ìˆ˜ ðŸŒ…"}[S.mood]||S.mood||"ì—†ìŒ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ì¡°ëª…"}),e.jsx("p",{className:"text-white",children:{natural:"ìžì—°ê´‘ â˜€ï¸",sunset:"ì„ì–‘ ðŸŒ…",night:"ì•¼ê°„ ðŸŒ™",indoor:"ì‹¤ë‚´ ðŸ’¡",dramatic:"ê·¹ì  ðŸŽ¬",soft:"ì†Œí”„íŠ¸ ðŸŒ¤ï¸",backlight:"ì—­ê´‘ âœ¨",neon:"ë„¤ì˜¨ ðŸŒˆ"}[S.lighting]||S.lighting})]}),S.dialogues.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"ëŒ€ì‚¬"}),e.jsx("div",{className:"space-y-2",children:S.dialogues.map(a=>e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-2",children:[e.jsx("p",{className:"text-xs text-purple-400",children:a.characterName||"ë‚˜ë ˆì´ì…˜"}),e.jsx("p",{className:"text-white text-sm",children:a.text})]},a.id))})]})]}):e.jsx("p",{className:"text-gray-400 text-center",children:"íŒ¨ë„ì„ ì„ íƒí•˜ì„¸ìš”"})})]})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:e.jsxs(q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gray-800 rounded-xl p-6 max-w-md w-full mx-4 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"ðŸ” ë¹ ì§„ íŒ¨ë„ ë°œê²¬"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"ë‹¤ìŒ íŒ¨ë„ ë²ˆí˜¸ê°€ ë¹ ì ¸ìžˆìŠµë‹ˆë‹¤:"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 mb-4 max-h-48 overflow-y-auto",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:ee.map(a=>e.jsxs("span",{className:"px-3 py-1 bg-red-500/20 text-red-400 rounded-full text-sm font-medium",children:["#",a]},a))})}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["ì´ ",ee.length,"ê°œì˜ íŒ¨ë„ì´ ë¹ ì ¸ìžˆìŠµë‹ˆë‹¤. AIê°€ ì•žë’¤ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì°¸ê³ í•˜ì—¬ ë¹ ì§„ íŒ¨ë„ì„ ìƒì„±í•©ë‹ˆë‹¤."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(P,{variant:"primary",className:"flex-1",onClick:()=>Le(ee),disabled:L,loading:L,children:"ë¹ ì§„ íŒ¨ë„ ìƒì„±"}),e.jsx(P,{variant:"secondary",onClick:()=>b(!1),children:"ì·¨ì†Œ"})]})]})})]})};export{Ds as default};
