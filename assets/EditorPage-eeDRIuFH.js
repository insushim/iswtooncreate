import{j as e,m as y,A as U}from"./ui-D_LkVF2r.js";import{r as I,e as J,u as Z}from"./vendor-Vqvh67Lm.js";import{B as b}from"./Button-C3O7gUUW.js";import{u as H,c as E,L as W,T as O}from"./index-Dq5gULfW.js";import{D as G,p as q}from"./parseJsonResponse-B5WYpGQP.js";import{g as R,C as T}from"./GeminiService-K05Xw73n.js";import"./storage-BBQgdv-R.js";import"./ai-BpRkNtKl.js";const F=({tabs:s,activeTab:m,onChange:r,variant:i="default",size:p="md",fullWidth:o=!1,className:n=""})=>{const d={sm:"px-3 py-1.5 text-sm gap-1.5",md:"px-4 py-2 text-base gap-2",lg:"px-5 py-2.5 text-lg gap-2.5"};return(()=>{switch(i){case"pills":return e.jsx("div",{className:`flex gap-2 ${o?"w-full":""} ${n}`,children:s.map(t=>e.jsxs("button",{onClick:()=>!t.disabled&&r(t.id),disabled:t.disabled,className:`
                  flex items-center ${d[p]} rounded-lg
                  font-medium transition-all duration-200
                  ${o?"flex-1 justify-center":""}
                  ${t.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                  ${m===t.id?"bg-purple-600 text-white":"bg-gray-700 text-gray-400 hover:text-white hover:bg-gray-600"}
                `,children:[t.icon,t.label]},t.id))});case"underline":return e.jsx("div",{className:`flex border-b border-gray-700 ${o?"w-full":""} ${n}`,children:s.map(t=>e.jsxs("button",{onClick:()=>!t.disabled&&r(t.id),disabled:t.disabled,className:`
                  relative flex items-center ${d[p]}
                  font-medium transition-colors duration-200
                  ${o?"flex-1 justify-center":""}
                  ${t.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                  ${m===t.id?"text-purple-400":"text-gray-400 hover:text-white"}
                `,children:[t.icon,t.label,m===t.id&&e.jsx(y.div,{layoutId:"underline",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-purple-500"})]},t.id))});default:return e.jsx("div",{className:`
              flex bg-gray-800 rounded-lg p-1
              ${o?"w-full":"inline-flex"}
              ${n}
            `,children:s.map(t=>e.jsxs("button",{onClick:()=>!t.disabled&&r(t.id),disabled:t.disabled,className:`
                  relative flex items-center ${d[p]} rounded-md
                  font-medium transition-all duration-200
                  ${o?"flex-1 justify-center":""}
                  ${t.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                  ${m===t.id?"text-white":"text-gray-400 hover:text-white"}
                `,children:[m===t.id&&e.jsx(y.div,{layoutId:"activeTab",className:"absolute inset-0 bg-gray-700 rounded-md",transition:{type:"spring",stiffness:500,damping:30}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[t.icon,t.label]})]},t.id))})}})()},X=[{value:"full",label:"ì „ì²´"},{value:"large",label:"ëŒ€í˜•"},{value:"medium",label:"ì¤‘í˜•"},{value:"small",label:"ì†Œí˜•"},{value:"wide",label:"ê°€ë¡œí˜•"},{value:"tall",label:"ì„¸ë¡œí˜•"}],_=[{value:"close-up",label:"í´ë¡œì¦ˆì—…"},{value:"medium-shot",label:"ë¯¸ë””ì—„ìƒ·"},{value:"wide-shot",label:"ì™€ì´ë“œìƒ·"},{value:"extreme-close-up",label:"ìµìŠ¤íŠ¸ë¦¼ í´ë¡œì¦ˆì—…"},{value:"bird-eye",label:"ë²„ë“œì•„ì´"},{value:"worm-eye",label:"ì›œì•„ì´"},{value:"dutch-angle",label:"ë”ì¹˜ì•µê¸€"},{value:"over-shoulder",label:"ì˜¤ë²„ìˆ„ë”"},{value:"pov",label:"POV"}],Q=({panel:s,episodeId:m,onUpdate:r})=>{const[i,p]=I.useState(!1),[o,n]=I.useState(null),{currentProject:d}=H(),{addToast:v}=E(),t=async(c="preview")=>{var N;if(d){p(!0);try{const x=d.worldBuilding,w=(x==null?void 0:x.era)||"ancient",l=(x==null?void 0:x.setting)||"historical";let h="ancient Korean Goguryeo period, traditional Korean architecture, wooden buildings, thatched roofs";(w.includes("ì² ê¸°")||w.includes("ê³ êµ¬ë ¤")||w.includes("ancient")||l.includes("ì—­ì‚¬"))&&(h="ancient Korean Three Kingdoms period (Goguryeo/Baekje), traditional hanok buildings, ancient palace, wooden architecture, oil lamps, silk robes, bronze mirrors, no modern elements");const z=s.characters.map(S=>{var L,$,u,P,C;const f=d.characters.find(g=>g.name===S.characterName||g.koreanName===S.characterName);if(f){const g=f.gender==="female"?"beautiful young woman":f.gender==="male"?"handsome young man":"person",D=f.age||25,A=((L=f.appearance)==null?void 0:L.hairColor)||"black",V=(($=f.appearance)==null?void 0:$.hairStyle)||"long",K=((u=f.appearance)==null?void 0:u.height)||"",M=((C=(P=f.appearance)==null?void 0:P.distinguishingFeatures)==null?void 0:C.join(", "))||"";return`${g}, ${D} years old, ${A} ${V} hair, wearing traditional ancient Korean hanbok clothing${K?`, ${K}`:""}${M?`, ${M}`:""}`}return"person in traditional Korean clothing"}).join("; "),a=`Korean historical manhwa webtoon illustration:

Scene: ${s.composition||((N=s.background)==null?void 0:N.description)||""}

Character: ${z}

Setting: ${h}

Art style: Korean webtoon manhwa style, clean anime lineart, soft cel shading, ${s.cameraAngle||"medium"} shot, professional quality.

ABSOLUTE RULES:
- NO TEXT anywhere in image
- NO LETTERS or WORDS
- NO SPEECH BUBBLES
- NO modern items (no electricity, no modern furniture)
- Ancient Korean historical setting only`,k=await R.generateImage(a,{resolution:c,styleAnchor:"",referenceImages:[],useCache:!1});c==="preview"?n(k.imageData):(r({generatedImage:{id:Date.now().toString(),resolution:c,imageData:k.imageData,promptUsed:a,generatedAt:new Date,fromCache:k.fromCache,cost:k.cost},status:"approved"}),n(null)),v({message:c==="preview"?"í”„ë¦¬ë·°ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤":"ê³ í•´ìƒë„ ì´ë¯¸ì§€ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤",type:"success"})}catch(x){console.error("Image generation failed:",x),v({message:"ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤",type:"error"})}finally{p(!1)}}},j=()=>{o&&(r({generatedImage:{id:Date.now().toString(),resolution:"preview",imageData:o,promptUsed:s.visualPrompt,generatedAt:new Date,fromCache:!1,cost:.001},status:"approved"}),n(null))};return e.jsxs("div",{className:"bg-gray-800/50 rounded-xl border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-2xl font-bold text-purple-400",children:["#",s.panelNumber]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.status==="approved"?"bg-green-500/20 text-green-400":s.status==="preview"?"bg-yellow-500/20 text-yellow-400":s.status==="regenerating"?"bg-blue-500/20 text-blue-400":"bg-gray-500/20 text-gray-400"}`,children:s.status==="approved"?"ìŠ¹ì¸ë¨":s.status==="preview"?"í”„ë¦¬ë·°":s.status==="regenerating"?"ì¬ìƒì„± ì¤‘":"ëŒ€ê¸°"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(G,{options:X,value:s.size,onChange:c=>r({size:c}),placeholder:"í¬ê¸°"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4",children:[e.jsx("div",{className:"aspect-[3/4] bg-gray-900 rounded-lg overflow-hidden relative",children:e.jsx(U,{mode:"wait",children:i?e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(W,{size:"lg",className:"mx-auto mb-2"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"ì´ë¯¸ì§€ ìƒì„± ì¤‘..."})]})},"loading"):o?e.jsx(y.img,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},src:o,alt:"Preview",className:"w-full h-full object-cover"},"preview"):s.generatedImage?e.jsx(y.img,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},src:s.generatedImage.imageData,alt:`Panel ${s.panelNumber}`,className:"w-full h-full object-cover"},"generated"):e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-4xl mb-2 block",children:"ğŸ¨"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"ì´ë¯¸ì§€ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”"})]})},"empty")})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(G,{label:"ì¹´ë©”ë¼ ì•µê¸€",options:_,value:s.cameraAngle,onChange:c=>r({cameraAngle:c})}),e.jsx(O,{label:"ì¥ë©´ ì„¤ëª…",value:s.composition,onChange:c=>r({composition:c.target.value}),rows:3,placeholder:"íŒ¨ë„ì— í‘œí˜„í•  ì¥ë©´ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”"}),e.jsx(O,{label:"ë¶„ìœ„ê¸° & ì¡°ëª…",value:`${s.mood}, ${s.lighting}`,onChange:c=>{const[N,x]=c.target.value.split(",").map(w=>w.trim());r({mood:N,lighting:x})},rows:2,placeholder:"ë¶„ìœ„ê¸°, ì¡°ëª…"}),e.jsx("div",{className:"flex gap-2 pt-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(b,{variant:"secondary",onClick:()=>n(null),fullWidth:!0,children:"ë‹¤ì‹œ ìƒì„±"}),e.jsx(b,{variant:"primary",onClick:j,fullWidth:!0,children:"ìŠ¹ì¸"}),e.jsx(b,{variant:"ghost",onClick:()=>t("high"),disabled:i,children:"ê³ í•´ìƒë„"})]}):e.jsx(b,{variant:"primary",onClick:()=>t("preview"),disabled:i,loading:i,fullWidth:!0,children:s.generatedImage?"ì¬ìƒì„±":"ì´ë¯¸ì§€ ìƒì„±"})})]})]}),s.characters.length>0&&e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"ë“±ì¥ ìºë¦­í„°"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.characters.map((c,N)=>e.jsx("span",{className:"px-3 py-1 bg-gray-700 rounded-full text-sm text-white",children:c.characterName},N))})]})]})},Y=({panels:s,selectedPanelId:m,onSelectPanel:r})=>e.jsxs("div",{className:"bg-gray-800/50 rounded-xl border border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"íƒ€ì„ë¼ì¸"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[s.length," íŒ¨ë„"]})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[s.map(i=>e.jsxs(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(i.id),className:`
              relative flex-shrink-0 w-20 h-28 rounded-lg overflow-hidden border-2 transition-all
              ${m===i.id?"border-purple-500 ring-2 ring-purple-500/30":"border-gray-700 hover:border-gray-600"}
            `,children:[i.generatedImage?e.jsx("img",{src:i.generatedImage.imageData,alt:`Panel ${i.panelNumber}`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-900 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 text-2xl",children:"ğŸ¨"})}),e.jsx("div",{className:"absolute top-1 left-1 w-5 h-5 rounded bg-black/60 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:i.panelNumber})}),e.jsx("div",{className:`absolute bottom-1 right-1 w-2 h-2 rounded-full ${i.status==="approved"?"bg-green-500":i.status==="preview"?"bg-yellow-500":"bg-gray-500"}`}),m===i.id&&e.jsx(y.div,{layoutId:"selectedPanel",className:"absolute inset-0 border-2 border-purple-500 rounded-lg"})]},i.id)),e.jsx("button",{className:"flex-shrink-0 w-20 h-28 rounded-lg border-2 border-dashed border-gray-700 hover:border-gray-600 flex items-center justify-center transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}),ee=({projectTitle:s,episodeTitle:m,onSave:r,onPreview:i,onExport:p})=>{const{viewMode:o,setViewMode:n,zoom:d,setZoom:v}=E(),t=[{id:"edit",label:"í¸ì§‘"},{id:"preview",label:"ë¯¸ë¦¬ë³´ê¸°"},{id:"split",label:"ë¶„í• "}];return e.jsx("div",{className:"bg-gray-800/80 backdrop-blur-sm border-b border-gray-700 px-4 py-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-white font-bold",children:s}),e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsx("span",{className:"text-gray-300",children:m})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(F,{tabs:t,activeTab:o,onChange:j=>n(j),variant:"pills",size:"sm"}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-gray-700 rounded-lg",children:[e.jsx("button",{onClick:()=>v(d-10),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsxs("span",{className:"text-white text-sm w-12 text-center",children:[d,"%"]}),e.jsx("button",{onClick:()=>v(d+10),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(b,{variant:"ghost",size:"sm",onClick:r,children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"ì €ì¥"]}),e.jsxs(b,{variant:"ghost",size:"sm",onClick:i,children:[e.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"ë¯¸ë¦¬ë³´ê¸°"]}),e.jsxs(b,{variant:"primary",size:"sm",onClick:p,children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"ë‚´ë³´ë‚´ê¸°"]})]})]})})},ce=()=>{const{projectId:s}=J(),m=Z(),{currentProject:r,setCurrentProject:i,updatePanel:p,addPanel:o}=H(),{selectedEpisodeId:n,setSelectedEpisode:d,selectedPanelId:v,setSelectedPanel:t,addToast:j}=E(),[c,N]=I.useState(!0),[x,w]=I.useState(!1);I.useEffect(()=>{(async()=>{s&&(await i(s),N(!1))})()},[s,i]),I.useEffect(()=>{r!=null&&r.episodes.length&&!n&&d(r.episodes[0].id)},[r,n,d]);const l=r==null?void 0:r.episodes.find(a=>a.id===n),h=l==null?void 0:l.panels.find(a=>a.id===v),z=async(a,k)=>{n&&(await p(n,a,k),j({message:"íŒ¨ë„ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤",type:"success"}))},B=async()=>{if(!(!l||!r)){w(!0),j({message:"íŒ¨ë„ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...",type:"info"});try{const a=r.worldBuilding,k=(a==null?void 0:a.era)||"ê³ ëŒ€ í•œêµ­",S=(a==null?void 0:a.setting)||"ì—­ì‚¬ë¬¼",f=`ë„ˆëŠ” ì›¹íˆ° ì‘ê°€ì•¼. ${l.episodeNumber}í™”ì˜ ì½˜í‹°ë¥¼ ë§Œë“¤ì–´.

ë°°ê²½ì‹œëŒ€: ${k}
ì„¤ì •: ${S}
ì¤„ê±°ë¦¬: ${l.summary}

JSON í˜•ì‹ìœ¼ë¡œ íŒ¨ë„ 10ê°œ ì¶œë ¥í•´. ë‹¤ë¥¸ ë§ í•˜ì§€ë§ˆ.

ì˜ˆì‹œ:
{"panels":[
{"n":1,"img":"ancient Korean palace bedroom, woman with long black hair waking up on wooden bed, confused look, oil lamp lighting, Goguryeo era","dialog":""},
{"n":2,"img":"close up of young woman face, shocked expression, traditional Korean interior background","dialog":"ì—¬ê¸°ê°€... ì–´ë””ì§€?"},
{"n":3,"img":"woman looking into bronze mirror, seeing unfamiliar reflection, ancient Korean room","dialog":"ì´ê²Œ ë‚˜ë¼ê³ ...?"}
]}

ì¤‘ìš”:
- img = ì˜ì–´ë¡œ ê·¸ë¦¼ ì„¤ëª…. ê³ ëŒ€ í•œêµ­ ë°°ê²½ í•„ìˆ˜. í˜„ëŒ€ ë¬¼ê±´ ê¸ˆì§€.
- dialog = ìºë¦­í„° ëŒ€ì‚¬ (í•œêµ­ì–´). ëŒ€ì‚¬ ì—†ìœ¼ë©´ ë¹ˆì¹¸ ""
- dialogì—ëŠ” ëŒ€ì‚¬ë§Œ! ì¥ë©´ì„¤ëª… ë„£ì§€ë§ˆ!
- ëŒ€ì‚¬ëŠ” "í°ë”°ì˜´í‘œ" ì•ˆì— ì§§ì€ í•œêµ­ì–´ ë¬¸ì¥
- imgì— í•œêµ­ì–´ ì“°ì§€ë§ˆ`,L=await R.generateText(f,{temperature:.8,maxTokens:8e3,useCache:!1}),$=q(L);if(!$.panels||$.panels.length===0)throw new Error("íŒ¨ë„ì´ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");for(const u of $.panels){const P=u.n||u.panelNumber||1,C=u.img||u.sceneDescription||"";let g=u.dialog||u.dialogue||u.talk||"";g&&(g.length>50||/[a-zA-Z]{5,}/.test(g)||g.includes("scene")||g.includes("shot"))&&(g="");const D=u.who||u.character||"",A={episodeId:l.id,panelNumber:P,size:"medium",cameraAngle:"medium-shot",composition:C,characters:D?[{characterId:"",characterName:D,position:{x:50,y:50},scale:1,expression:"neutral",pose:"standing",action:"",facing:"front",layer:1}]:[],background:{locationName:"",description:C,timeOfDay:"afternoon",weather:"",mood:"",focusPoint:"",depth:"medium"},dialogues:g?[{id:`dlg-${Date.now()}-${P}`,text:g,type:"speech",bubbleStyle:"normal",position:{x:50,y:20},size:{width:200,height:80},fontSize:"medium"}]:[],sfx:[],mood:"",lighting:"natural",visualPrompt:C,status:"pending"};await o(l.id,A)}await i(s),j({message:`${$.panels.length}ê°œ íŒ¨ë„ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!`,type:"success"})}catch(a){console.error("Panel generation failed:",a),j({message:"íŒ¨ë„ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",type:"error"})}finally{w(!1)}}};return c?e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx(W,{size:"lg"})}):r?e.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col",children:[e.jsx(ee,{projectTitle:r.title,episodeTitle:(l==null?void 0:l.title)||"ì—í”¼ì†Œë“œ ì„ íƒ",onSave:()=>j({message:"ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤",type:"success"}),onPreview:()=>m(`/preview/${s}`),onExport:()=>j({message:"ë‚´ë³´ë‚´ê¸° ì¤€ë¹„ ì¤‘...",type:"info"})}),e.jsxs("div",{className:"flex-1 flex",children:[e.jsxs("div",{className:"w-64 bg-gray-800/50 border-r border-gray-700 p-4 overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"ì—í”¼ì†Œë“œ"}),e.jsx("div",{className:"space-y-2",children:r.episodes.length>0?r.episodes.map(a=>e.jsxs(y.button,{whileHover:{x:4},onClick:()=>{d(a.id),a.panels.length>0&&t(a.panels[0].id)},className:`w-full text-left p-3 rounded-lg transition-colors ${n===a.id?"bg-purple-600/30 border border-purple-500":"bg-gray-700/50 hover:bg-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-white font-medium",children:[a.episodeNumber,"í™”"]}),e.jsxs("span",{className:"text-gray-400 text-sm",children:[a.panels.length," íŒ¨ë„"]})]}),e.jsx("p",{className:"text-gray-400 text-sm truncate mt-1",children:a.title})]},a.id)):e.jsxs("div",{className:"text-center text-gray-400 py-8",children:[e.jsx("p",{children:"ì—í”¼ì†Œë“œê°€ ì—†ìŠµë‹ˆë‹¤"}),e.jsx(b,{variant:"ghost",size:"sm",className:"mt-2",onClick:()=>{},children:"ì—í”¼ì†Œë“œ ì¶”ê°€"})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"ìºë¦­í„°"}),e.jsx("div",{className:"space-y-2",children:r.characters.map(a=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-gray-700/30",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-sm",children:a.gender==="female"?"ğŸ‘©":"ğŸ‘¨"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:a.name}),e.jsx("p",{className:"text-gray-400 text-xs",children:a.role})]})]},a.id))})]})]}),e.jsx("div",{className:"flex-1 flex flex-col p-4 overflow-hidden",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Y,{panels:l.panels,selectedPanelId:v,onSelectPanel:t}),e.jsx("div",{className:"flex-1 mt-4 overflow-y-auto",children:h?e.jsx(Q,{panel:h,episodeId:l.id,onUpdate:a=>z(h.id,a)}):e.jsx(T,{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:"ğŸ¬"}),e.jsx("p",{className:"text-gray-400 mb-2",children:l.panels.length===0?"ì´ ì—í”¼ì†Œë“œì— íŒ¨ë„ì´ ì—†ìŠµë‹ˆë‹¤":"íŒ¨ë„ì„ ì„ íƒí•˜ê±°ë‚˜ ìƒˆë¡œ ì¶”ê°€í•˜ì„¸ìš”"}),l.panels.length===0&&e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"AIê°€ ì—í”¼ì†Œë“œ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ íŒ¨ë„ì„ ìë™ ìƒì„±í•©ë‹ˆë‹¤"}),e.jsx(b,{variant:"primary",className:"mt-4",onClick:B,disabled:x,loading:x,children:x?"AI íŒ¨ë„ ìƒì„± ì¤‘...":"AI íŒ¨ë„ ìë™ ìƒì„±"})]})})})]}):e.jsx(T,{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:"ğŸ“š"}),e.jsx("p",{className:"text-gray-400",children:"ì—í”¼ì†Œë“œë¥¼ ì„ íƒí•˜ì„¸ìš”"})]})})}),e.jsxs("div",{className:"w-72 bg-gray-800/50 border-l border-gray-700 p-4 overflow-y-auto",children:[e.jsx(F,{tabs:[{id:"properties",label:"ì†ì„±"},{id:"dialogue",label:"ëŒ€ì‚¬"}],activeTab:"properties",onChange:()=>{},variant:"underline",fullWidth:!0}),e.jsx("div",{className:"mt-4",children:h?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"íŒ¨ë„ í¬ê¸°"}),e.jsx("p",{className:"text-white",children:h.size})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ì¹´ë©”ë¼ ì•µê¸€"}),e.jsx("p",{className:"text-white",children:h.cameraAngle})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ë¶„ìœ„ê¸°"}),e.jsx("p",{className:"text-white",children:h.mood})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"ì¡°ëª…"}),e.jsx("p",{className:"text-white",children:h.lighting})]}),h.dialogues.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"ëŒ€ì‚¬"}),e.jsx("div",{className:"space-y-2",children:h.dialogues.map(a=>e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-2",children:[e.jsx("p",{className:"text-xs text-purple-400",children:a.characterName||"ë‚˜ë ˆì´ì…˜"}),e.jsx("p",{className:"text-white text-sm",children:a.text})]},a.id))})]})]}):e.jsx("p",{className:"text-gray-400 text-center",children:"íŒ¨ë„ì„ ì„ íƒí•˜ì„¸ìš”"})})]})]})]}):e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs(T,{className:"text-center p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"}),e.jsx(b,{variant:"primary",onClick:()=>m("/dashboard"),children:"ëŒ€ì‹œë³´ë“œë¡œ ì´ë™"})]})})};export{ce as default};
